import{j as l}from"./jsx-runtime-Cf8x2fCZ.js";import{r as w}from"./index-G8LIXM5I.js";import{c as T}from"./clsx-B-dksMZM.js";import{B as oe}from"./Button-D0D1oEGK.js";import{T as re}from"./Tag-B2cGE1yR.js";import{S as le}from"./Search-DSeLwkIx.js";import{S as se}from"./ChevronDown-DW4Cg-no.js";import{a as ue,M as Y,u as de}from"./MenuItem-Ff_NV9Uz.js";import{S as ce}from"./SearchInput-D5Terlek.js";import{T as pe}from"./TreeView-DvkNZsIM.js";import{o as me}from"./useAccessibleClick-Bdvd2I0f.js";import{S as he}from"./Separator-B3Ws4ABk.js";import{S as fe,a as ye}from"./CheckboxUnchecked-CIfxf0rQ.js";import{L as ge}from"./Loader-DsiRlRl8.js";import{T as ve}from"./Typography-B9xY8qhe.js";const $=({isDisplayed:e,anchorPosition:n,minWidth:t,maxWidth:o,maxHeight:r,anchorEl:u,hasSearch:p,autoAddSearchLimit:g,searchEmptyText:C,data:b,value:v,values:V,imageSize:m,handleSelect:_,onClose:q})=>{const D=a=>(V==null?void 0:V.indexOf(a.value))>-1?l.jsx(fe,{role:"checkbox",color:"blue"}):l.jsx(ye,{role:"checkbox"}),E=a=>l.jsx(Y,{iconStart:V?D(a):a.iconStart,iconSize:"default",label:a.label,description:a.description,iconEnd:a.iconEnd,isDisabled:a.isDisabled,isSelected:v===a.value,image:a.image,imageSize:m,...me({onClick:h=>_(h,a),disabled:a.isDisabled,role:"option"}),...a.attributes},a.value),A=(a,h,x)=>l.jsxs("div",{"data-option-type":"group",children:[x>0&&l.jsx(he,{}),l.jsx(Y,{variant:"title",label:h}),a.map(M=>E(M))]},`${h}-${x}`);return b.length===0?null:l.jsx(ue,{isDisplayed:e,position:"fixed",anchorPosition:n,minWidth:t,maxWidth:o,maxHeight:r,anchorEl:u,hasSearch:p,autoAddSearchLimit:g,searchEmptyText:C,onClose:q,children:b.map((a,h)=>"options"in a&&"groupLabel"in a?(a.options.map(x=>E(x)),A(a.options,a.groupLabel,h)):E(a))})};try{$.displayName="DropdownMenu",$.__docgenInfo={description:"",displayName:"DropdownMenu",props:{style:{defaultValue:null,description:"Additional styles",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onMouseEnter:{defaultValue:null,description:"Function triggered when the mouse pointer hovering the menu",name:"onMouseEnter",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onMouseLeave:{defaultValue:null,description:"Function triggered when the mouse pointer move off the menu",name:"onMouseLeave",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},maxHeight:{defaultValue:null,description:"Maximum height of the Menu",name:"maxHeight",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"Maximum width of the Menu",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"Minimum width of the Menu",name:"minWidth",required:!1,type:{name:"string"}},isDisplayed:{defaultValue:null,description:"Menu is display",name:"isDisplayed",required:!0,type:{name:"boolean"}},anchorEl:{defaultValue:null,description:"Reference element to positioning the menu",name:"anchorEl",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},anchorPosition:{defaultValue:null,description:"Position of the menu in px relative to anchorEl or the document",name:"anchorPosition",required:!1,type:{name:"AnchorPosition"}},anchorElOrigin:{defaultValue:null,description:"Point on the anchor where the menu's anchorEl will attach to",name:"anchorElOrigin",required:!1,type:{name:"AnchorElOrigin"}},transformElOrigin:{defaultValue:null,description:"This is the point on the menu which will attach to the anchor's origin",name:"transformElOrigin",required:!1,type:{name:"TransformElOrigin"}},hasSearch:{defaultValue:null,description:`Whether the Menu displays a search input at the top
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:null,description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:null,description:"Text to display when the search doesn't show any results",name:"searchEmptyText",required:!1,type:{name:"string"}},position:{defaultValue:null,description:`If 'absolute' is passed in for the position, the component will be positioned as per normal
CSS rules (i.e., positioned against the closest positioned ancestor). Position is 'fixed' by default`,name:"position",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},onClose:{defaultValue:null,description:"Function triggered when the menu close",name:"onClose",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onEntering:{defaultValue:null,description:"Function triggered when the menu is going to be opened (before open)",name:"onEntering",required:!1,type:{name:"() => void"}},onEntered:{defaultValue:null,description:"Function triggered when the menu has been opened (after open)",name:"onEntered",required:!1,type:{name:"() => void"}},onExiting:{defaultValue:null,description:"Function triggered when the menu is going to be closed (before exit)",name:"onExiting",required:!1,type:{name:"() => void"}},onExited:{defaultValue:null,description:"Function triggered when the menu has been closed (after exit)",name:"onExited",required:!1,type:{name:"() => void"}},hasOverlay:{defaultValue:null,description:"The menu has overlay or not",name:"hasOverlay",required:!1,type:{name:"boolean"}},searchInput:{defaultValue:null,description:"",name:"searchInput",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"DropdownData"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[]"}},imageSize:{defaultValue:null,description:"",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},handleSelect:{defaultValue:null,description:"",name:"handleSelect",required:!0,type:{name:"(e?: KeyboardEvent<Element> | MouseEvent<Element, MouseEvent>, item?: DropdownDataOption) => void"}},handleKeyPress:{defaultValue:null,description:"",name:"handleKeyPress",required:!0,type:{name:"(e?: KeyboardEvent<Element>, item?: DropdownDataOption) => void"}}}}}catch{}function Z(e,n,t){const o=[];return n.forEach(r=>{const u=we(e,r,t);u&&o.push(u)}),o}const we=(e,n,t)=>{const o=e(n),r=[];if(n.children){const u=Z(e,n.children,t);u.length>0&&(r.push(...u),t.push(n.id))}if(o||r.length>0)return{...n,treeItemProps:{className:T({"moonstone-disabled":!o})},isDisabled:!o,children:r}},z=(e,n,t)=>{if(e(n))return n;if(n.children){const o=n.children.reduce((r,u)=>r||z(e,u,t),null);return o&&t&&t.push(n.id),o}},Ee=e=>{var o;const n=[],t=r=>{n.push(r),r.children&&r.children.forEach(t)};return(o=e==null?void 0:e.forEach)==null||o.call(e,t),n},xe={horizontal:"left",vertical:"bottom"},be={vertical:"top",horizontal:"left"},Ve={top:0,left:0},R=({isDisplayed:e,minWidth:n,maxWidth:t,maxHeight:o,anchorEl:r=null,anchorElOrigin:u=xe,transformElOrigin:p=be,anchorPosition:g=Ve,position:C="fixed",hasOverlay:b=!0,hasSearch:v,autoAddSearchLimit:V=7,treeData:m,value:_,values:q,handleSelect:D,onClose:E})=>{var S;const[A,a]=de(e,g,r,u,p,C),[h,x]=w.useState(""),[M,O]=w.useState([]),f=d=>{O(c=>[...c,d.id])},N=d=>{O(c=>c.filter(y=>y!==d.id))},j=[],L=[];h!==""&&(m=Z(d=>d.label.toLowerCase().includes(h.toLowerCase()),m,j)),_&&m.forEach(d=>{const c=z(y=>y.value===_,d,j);c&&L.push(c.id)}),q&&q.forEach(d=>{m.forEach(c=>{const y=z(F=>F.value===d,c,j);y&&L.push(y.id)})});const P={position:C,...A};n&&(P.minWidth=n),t&&(P.maxWidth=t),o&&(P.maxHeight=o);let I=v;return typeof v>"u"&&(I=((S=Ee(m))==null?void 0:S.length)>V),l.jsxs(l.Fragment,{children:[l.jsxs("menu",{ref:a,className:"moonstone-menu",style:P,children:[I&&l.jsx("div",{className:"moonstone-menu_searchInput",children:l.jsx(ce,{value:h,onChange:d=>x(d.target.value),onKeyUp:d=>{if(d.key==="Enter"&&m.length>0){const c=z(y=>!y.isDisabled,m[0]);c&&D(d,c)}},onClear:()=>x("")})}),l.jsx(pe,{data:m,selectedItems:L,size:"small",showCheckbox:!!q,openedItems:[...M,...j],onOpenItem:f,onCloseItem:N,onClickItem:(d,c)=>{D(c,d)}})]}),b&&e&&l.jsx("div",{"aria-hidden":"true",className:"moonstone-menu_overlay",onClick:E,onContextMenu:E})]})};R.displayName="TreeViewMenu";try{R.displayName="TreeViewMenu",R.__docgenInfo={description:"",displayName:"TreeViewMenu",props:{style:{defaultValue:null,description:"Additional styles",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onMouseEnter:{defaultValue:null,description:"Function triggered when the mouse pointer hovering the menu",name:"onMouseEnter",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onMouseLeave:{defaultValue:null,description:"Function triggered when the mouse pointer move off the menu",name:"onMouseLeave",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},maxHeight:{defaultValue:null,description:"Maximum height of the Menu",name:"maxHeight",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"Maximum width of the Menu",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"Minimum width of the Menu",name:"minWidth",required:!1,type:{name:"string"}},isDisplayed:{defaultValue:null,description:"Menu is display",name:"isDisplayed",required:!0,type:{name:"boolean"}},anchorEl:{defaultValue:{value:"null"},description:"Reference element to positioning the menu",name:"anchorEl",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},anchorPosition:{defaultValue:{value:`{
    top: 0,
    left: 0
}as const`},description:"Position of the menu in px relative to anchorEl or the document",name:"anchorPosition",required:!1,type:{name:"AnchorPosition"}},anchorElOrigin:{defaultValue:{value:`{
    horizontal: 'left',
    vertical: 'bottom'
}as const`},description:"Point on the anchor where the menu's anchorEl will attach to",name:"anchorElOrigin",required:!1,type:{name:"AnchorElOrigin"}},transformElOrigin:{defaultValue:{value:`{
    vertical: 'top',
    horizontal: 'left'
}as const`},description:"This is the point on the menu which will attach to the anchor's origin",name:"transformElOrigin",required:!1,type:{name:"TransformElOrigin"}},hasSearch:{defaultValue:null,description:`Whether the Menu displays a search input at the top
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:{value:"7"},description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:null,description:"Text to display when the search doesn't show any results",name:"searchEmptyText",required:!1,type:{name:"string"}},position:{defaultValue:{value:"fixed"},description:`If 'absolute' is passed in for the position, the component will be positioned as per normal
CSS rules (i.e., positioned against the closest positioned ancestor). Position is 'fixed' by default`,name:"position",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},onClose:{defaultValue:null,description:"Function triggered when the menu close",name:"onClose",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onEntering:{defaultValue:null,description:"Function triggered when the menu is going to be opened (before open)",name:"onEntering",required:!1,type:{name:"() => void"}},onEntered:{defaultValue:null,description:"Function triggered when the menu has been opened (after open)",name:"onEntered",required:!1,type:{name:"() => void"}},onExiting:{defaultValue:null,description:"Function triggered when the menu is going to be closed (before exit)",name:"onExiting",required:!1,type:{name:"() => void"}},onExited:{defaultValue:null,description:"Function triggered when the menu has been closed (after exit)",name:"onExited",required:!1,type:{name:"() => void"}},hasOverlay:{defaultValue:{value:"true"},description:"The menu has overlay or not",name:"hasOverlay",required:!1,type:{name:"boolean"}},treeData:{defaultValue:null,description:"Data to generate the tree",name:"treeData",required:!0,type:{name:"TreeViewData[]"}},searchInput:{defaultValue:null,description:"",name:"searchInput",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[]"}},imageSize:{defaultValue:null,description:"",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},handleSelect:{defaultValue:null,description:"",name:"handleSelect",required:!0,type:{name:"(e?: KeyboardEvent<Element> | MouseEvent<Element, MouseEvent>, item?: DropdownDataOption) => void"}},handleKeyPress:{defaultValue:null,description:"",name:"handleKeyPress",required:!1,type:{name:"(e?: KeyboardEvent<Element>, item?: DropdownDataOption) => void"}}}}}catch{}const qe=e=>{var o;const n=[],t=r=>{n.push(r),r.children&&r.children.forEach(t)};return(o=e==null?void 0:e.forEach)==null||o.call(e,t),n},Me=e=>Array.isArray(e)?e.every(n=>"options"in n&&"groupLabel"in n):!1,B=(e,n)=>Me(e)?e.reduce((t,o)=>t.concat(o.options),[]).find(t=>t.value===n):e.find(t=>t.value===n),U=({data:e,treeData:n,label:t,placeholder:o,value:r,values:u,isDisabled:p,isLoading:g=!1,variant:C="ghost",size:b="medium",icon:v,hasSearch:V,autoAddSearchLimit:m=7,searchEmptyText:_="No results found.",imageSize:q,onClear:D,onChange:E,onBlur:A,onFocus:a,className:h,...x})=>{var X,Q;const[M,O]=w.useState(!1),[f,N]=w.useState({focused:!1,event:null,lastSent:!1}),[j,L]=w.useState(null),[P,I]=w.useState(null),S=w.useRef(),d=Array.isArray(n),c=w.useMemo(()=>d?qe(n):e,[n,e,d]),y=c.length===0;if(w.useEffect(()=>{f.focused&&f.event&&!f.lastSent&&a&&(a(f.event),N(i=>({...i,lastSent:!0})))},[a,f]),w.useEffect(()=>{!f.focused&&!M&&f.event&&f.lastSent&&A&&(A(f.event),N(i=>({...i,lastSent:!1})))},[A,M,f]),!Array.isArray(c))return null;const F=80,ee={top:4,left:0};let k,W;switch(q){case"big":k="400px",W="440px";break;case"small":k="264px",W="320px";break;default:k="250px",W="270px"}const G=i=>{i.stopPropagation();const s=i.currentTarget.offsetWidth;I(`${s<F?F:s}px`),L(i.currentTarget),O(!0)},K=(i,s)=>{if(s)if(u)s.isDisabled||(i.stopPropagation(),E(i,s));else{let H=!s.isDisabled;!s.isDisabled&&s.value!==r&&(i.stopPropagation(),H=E(i,s)),H!==!1&&O(!1)}},ne=()=>{O(!1),L(null)},te=(i,s)=>{i.key==="Enter"&&K(i,s)},J=r||(u==null?void 0:u.length)>0,ae=T(!t&&!v?"flexRow_reverse":"flexRow_between","alignCenter","moonstone-dropdown",`moonstone-${b}`,`moonstone-dropdown_${C}`,{"moonstone-disabled":typeof p>"u"&&y?!0:p,"moonstone-dropdown_loading":g,"moonstone-filled":J,"moonstone-opened":M}),ie=d?R:$;return l.jsxs("div",{className:T("moonstone-dropdown_container",h),...x,children:[l.jsxs("div",{ref:S,role:"listbox","aria-label":t||((X=B(c,r))==null?void 0:X.label)||o,"aria-disabled":p||y,"aria-busy":g?!0:void 0,className:T(ae),tabIndex:0,onClick:!p&&!g&&G,onKeyUp:i=>{i.key==="Enter"&&!p&&!g&&G(i)},onBlur:i=>{N(s=>({...s,focused:!1,event:i}))},onFocus:i=>{N(s=>({...s,focused:!0,event:i}))},children:[v&&!g&&l.jsx(v.type,{...v.props,size:"default",className:T("moonstone-dropdown_icon"),role:"presentation"}),g&&l.jsx(ge,{size:"small",className:T({"moonstone-dropdown_loaderOverlay":!v})}),!t&&u&&u.length>0?l.jsx("div",{className:"moonstone-dropdown_tags flexFluid flexRow",children:u.map(i=>{const s=B(c,i);return s&&l.jsx(re,{label:s.label,value:s.value,size:b,isDisabled:p,role:"option",onClick:H=>{S.current.focus(),S.current.blur(),p||K(H,s)}},s.value)})}):l.jsx(ve,{isNowrap:!0,variant:b==="small"?"caption":"body",component:"span",className:T("flexFluid","moonstone-dropdown_label"),title:t,role:"option",children:t||((Q=B(c,r))==null?void 0:Q.label)||o}),D&&J&&!p&&l.jsx(oe,{className:"moonstone-baseInput_clearButton flexRow_center alignCenter",variant:"ghost",icon:l.jsx(le,{}),"aria-label":"Reset",onClick:i=>{i.stopPropagation(),S.current.focus(),S.current.blur(),D(i)}}),l.jsx(se,{className:"moonstone-dropdown_chevronDown",role:"presentation"})]}),M&&l.jsx(ie,{isDisplayed:!0,data:e,treeData:n,value:r,values:u,anchorPosition:ee,minWidth:P,maxWidth:k,maxHeight:W,anchorEl:j,hasSearch:V,autoAddSearchLimit:m,searchEmptyText:_,handleKeyPress:te,handleSelect:K,imageSize:q,onClose:ne})]})};U.displayName="Dropdown";try{U.displayName="Dropdown",U.__docgenInfo={description:"",displayName:"Dropdown",props:{data:{defaultValue:null,description:"Content of the dropdown",name:"data",required:!1,type:{name:"DropdownData"}},treeData:{defaultValue:null,description:"Content of the dropdown, if tree",name:"treeData",required:!1,type:{name:"DropdownDataTree"}},placeholder:{defaultValue:null,description:"Text for dropdown, when no value is selected",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label of the dropdown",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Value of the dropdown",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"Value of the dropdown",name:"values",required:!1,type:{name:"string[]"}},icon:{defaultValue:null,description:"Icon displays before the dropdown's label",name:"icon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},variant:{defaultValue:{value:"ghost"},description:"Dropdown's variants",name:"variant",required:!1,type:{name:"enum",value:[{value:'"ghost"'},{value:'"outlined"'}]}},size:{defaultValue:{value:"medium"},description:"Dropdown's sizes",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'}]}},imageSize:{defaultValue:null,description:"Size of images to show in the Dropdown",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},isDisabled:{defaultValue:null,description:"Whether the component should be disabled",name:"isDisabled",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:{value:"false"},description:"Whether the dropdown is loading",name:"isLoading",required:!1,type:{name:"boolean"}},hasSearch:{defaultValue:null,description:`Whether the Menu within the Dropdown has a search input
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:{value:"7"},description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:{value:"No results found."},description:"The text to display if the Dropdown Menu has a search input and the search doesn't have any results",name:"searchEmptyText",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Function - when passed in, the Clear icon appears at the end of the input and its click event is passed back when the Clear icon is clicked",name:"onClear",required:!1,type:{name:"MouseEventHandler<Element>"}},onChange:{defaultValue:null,description:`Function trigger on change with the current option as param
@param event - Mouse event
@param item - The current item selected`,name:"onChange",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>, item: DropdownDataOption) => void"}},onFocus:{defaultValue:null,description:"Function triggered on focus of the checkbox value",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"Function triggered when the checkbox value loses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}}}}}catch{}export{U as D};

import{j as a}from"./jsx-runtime-Cf8x2fCZ.js";import{r as S}from"./index-G8LIXM5I.js";import{B as q}from"./Button-Cjq0zrP_.js";import{c as C}from"./clsx-B-dksMZM.js";import{L as I}from"./ListItem-Crrcgnf0.js";import{S as k}from"./HandleDrag-D6n6KY9w.js";import{S as b}from"./SearchInput-5ftwiOLF.js";import{S as R}from"./ChevronRight-CtX5Dnjk.js";import{a as A,S as F}from"./ChevronDoubleRight-DJ_10qPq.js";import{S as P}from"./Close-Dt0TtWGW.js";import{T as L}from"./Typography-C8hU4Ja4.js";const y=({values:o,setFilter:x,iconEnd:s,draggedId:d,isReadOnly:i,listClasses:T=[],role:t,onClick:u,onDragStart:D,onDragEnd:g,onDragOver:N,onDrop:c})=>a.jsxs("div",{className:"flexCol_nowrap moonstone-valueList_wrapper",children:[a.jsx(b,{onChange:r=>x(r.target.value.trim())}),a.jsx("ul",{className:C("moonstone-valueList",...T),onDragOver:r=>N(r,null),onDrop:r=>c(r,null),children:o.map(r=>{const m=["moonstone-valueListItem"];return d===r.value&&r.tempItem?m.push("moonstone-noHoveEffect","moonstone-noOpacity"):d&&d!==r.value?m.push("moonstone-noHoveEffect"):d&&d===r.value&&m.push("moonstone-valueListItem","moonstone-dragging"),a.jsx(I,{role:t,iconStart:!i&&a.jsx("div",{className:"moonstone-iconContainer",draggable:"true",onDragStart:l=>D(l,r),onDragEnd:l=>g(l,r),children:a.jsx(k,{className:"moonstone-dragHandle"})}),iconEnd:!i&&(t==="left-list"?a.jsx("div",{className:"moonstone-iconContainer",children:s}):a.jsx("div",{className:"moonstone-iconContainer",onClick:l=>u(l,r),children:s})),className:C(...m),typographyVariant:"body",label:r.label,onClick:l=>{!i&&t==="left-list"&&u(l,r)},onDragOver:l=>{i||N(l,r)},onDrop:l=>{i||c(l,r)}},r.label)})})]});y.displayName="ValueList";try{y.displayName="ValueList",y.__docgenInfo={description:"",displayName:"ValueList",props:{values:{defaultValue:null,description:"List values",name:"values",required:!1,type:{name:"Value[]"}},setFilter:{defaultValue:null,description:"Set filter",name:"setFilter",required:!0,type:{name:"(filter: string) => void"}},iconEnd:{defaultValue:null,description:"Orientation of the list (left side / right side)",name:"iconEnd",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},draggedId:{defaultValue:null,description:"Dragged item value/id",name:"draggedId",required:!1,type:{name:"string"}},isReadOnly:{defaultValue:null,description:"Whether the component cannot be modified",name:"isReadOnly",required:!1,type:{name:"boolean"}},listClasses:{defaultValue:{value:"[]"},description:"Additional classes for <ul> element",name:"listClasses",required:!1,type:{name:"string[]"}},role:{defaultValue:null,description:"List role",name:"role",required:!0,type:{name:"string"}},onClick:{defaultValue:null,description:"OnClick callback",name:"onClick",required:!0,type:{name:"(e: MouseEvent<Element, MouseEvent>, value: Value) => void"}},onDragStart:{defaultValue:null,description:"OnDragStart callback",name:"onDragStart",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}},onDragEnd:{defaultValue:null,description:"OnDragEnd callback",name:"onDragEnd",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}},onDragOver:{defaultValue:null,description:"OnDragOver callback",name:"onDragOver",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}},onDrop:{defaultValue:null,description:"OnDrop callback",name:"onDrop",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}}}}}catch{}const f="mlrs_drag_list_item",_=({label:o={rightListTitle:"",leftListTitle:"",addAllTitle:"Add all",removeAllTitle:"Remove all",selected:"0 items selected"},options:x=[],values:s=[],isReadOnly:d,onChange:i,...T})=>{var E,j;const[t,u]=S.useState(null),D=((E=o==null?void 0:o.rightListTitle)==null?void 0:E.length)>0||((j=o==null?void 0:o.leftListTitle)==null?void 0:j.length)>0,[g,N]=S.useState(null),[c,r]=S.useState(null),m=x.filter(e=>!s.includes(e.value)).filter(e=>!g||g===""||e.label.toLowerCase().indexOf(g.toLowerCase())!==-1),l=s.map(e=>x.find(n=>n.value===e)).filter(e=>!c||c===""||e.label.toLowerCase().indexOf(c.toLowerCase())!==-1);return typeof(t==null?void 0:t.originalIndex)=="number"&&l.splice(t.originalIndex,1),typeof(t==null?void 0:t.index)=="number"&&l.splice(t.index,0,{...t.value,tempItem:typeof t.originalIndex!="number"}),a.jsxs("div",{className:C("flexRow_nowrap","moonstone-listSelector"),...T,children:[a.jsxs("div",{className:"moonstone-listSelector_left flexCol_nowrap flexFluid",children:[D&&a.jsx("header",{className:"moonstone-listSelector_title flexRow alignCenter",children:a.jsx(L,{isNowrap:!0,component:"h3",weight:"bold",children:o==null?void 0:o.leftListTitle})}),a.jsx(y,{values:m,role:"left-list",iconEnd:a.jsx(R,{className:"moonstone-displayNone"}),isReadOnly:d,filter:g,setFilter:N,listClasses:typeof(t==null?void 0:t.originalIndex)=="number"?["moonstone-draggedOver"]:[],draggedId:t==null?void 0:t.value.value,onClick:(e,n)=>{i(s.concat(n.value))},onDragStart:(e,n)=>{e.stopPropagation();const p=e.currentTarget;setTimeout(()=>{p.parentNode.parentNode.style.opacity="0"},10),e.dataTransfer.setData(f,JSON.stringify({type:f,value:n})),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(e.currentTarget.parentNode.parentNode,10,10),u({value:n,from:"left"})},onDragEnd:e=>{e.stopPropagation(),e.currentTarget.parentNode.parentNode.style.opacity="1",u(null)},onDragOver:e=>{e.stopPropagation(),e.dataTransfer.types.includes(f)&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},onDrop:e=>{e.stopPropagation(),e.dataTransfer.types.includes(f)&&(i(s.filter(n=>n!==t.value.value)),u(null))}})]}),a.jsxs("div",{className:"moonstone-listSelector_buttons alignCenter flexCol_center",children:[a.jsx(q,{title:o.addAllTitle,role:"add-all",variant:"ghost",isDisabled:d||m.length===0,icon:a.jsx(A,{}),onClick:()=>i([...l,...m].map(e=>e.value))}),a.jsx(q,{title:o.removeAllTitle,role:"remove-all",variant:"ghost",isDisabled:d||l.length===0,icon:a.jsx(F,{}),onClick:()=>i(s.filter(e=>!l.find(n=>n.value===e)))})]}),a.jsxs("div",{className:"moonstone-listSelector_right flexCol_nowrap flexFluid",children:[D&&a.jsx("header",{className:"moonstone-listSelector_title flexRow alignCenter",children:a.jsx(L,{isNowrap:!0,component:"h3",weight:"bold",children:o==null?void 0:o.rightListTitle})}),a.jsx(y,{values:l,role:"right-list",iconEnd:a.jsx(P,{className:"moonstone-displayNone"}),isReadOnly:d,label:o,filter:c,setFilter:r,listClasses:t&&!c?["moonstone-draggedOver"]:[],draggedId:t==null?void 0:t.value.value,onClick:(e,n)=>{i(s.filter(p=>p!==n.value))},onDragStart:(e,n)=>{e.stopPropagation();const p=e.currentTarget;setTimeout(()=>{p.parentNode.parentNode.style.opacity="0"},10),e.dataTransfer.setData(f,JSON.stringify({type:f,value:n})),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(e.currentTarget.parentNode.parentNode,10,10),u({value:n,originalIndex:l.indexOf(n),index:l.indexOf(n),from:"right"})},onDragEnd:e=>{e.stopPropagation(),e.currentTarget.parentNode.parentNode.style.opacity="1",u(null)},onDragOver:(e,n)=>{var p;if(e.stopPropagation(),e.dataTransfer.types.includes(f)&&!c){e.preventDefault(),e.dataTransfer.dropEffect="move";const V=e.currentTarget.getBoundingClientRect(),O={x:e.clientX,y:e.clientY},w=V.y+V.height/2;let v=-1;n&&((p=t==null?void 0:t.value)==null?void 0:p.value)!==n.value?(O.y<w&&(v=l.filter(h=>h.value!==t.value.value).indexOf(n)),O.y>w&&(v=l.filter(h=>h.value!==t.value.value).indexOf(n)+1)):n||(v=l.length),v!==-1&&t.index!==v&&u(h=>({...h,index:v}))}},onDrop:e=>{e.stopPropagation(),e.dataTransfer.types.includes(f)&&(i(l.map(n=>n.value)),u(null))}}),a.jsx("footer",{className:"moonstone-listSelector_footer flexRow alignCenter",children:s.length>0&&a.jsx(L,{variant:"caption",weight:"semiBold",children:o.selected})})]})]})};_.displayName="ListSelector";try{_.displayName="ListSelector",_.__docgenInfo={description:"",displayName:"ListSelector",props:{label:{defaultValue:{value:`{
        rightListTitle: '',
        leftListTitle: '',
        addAllTitle: 'Add all',
        removeAllTitle: 'Remove all',
        selected: '0 items selected'
    }`},description:"Labels for component",name:"label",required:!1,type:{name:"Label"}},options:{defaultValue:{value:"[]"},description:"Options for left list",name:"options",required:!1,type:{name:"Option[]"}},values:{defaultValue:{value:"[]"},description:"Picked values, these are option values which should be recorded in onChange",name:"values",required:!1,type:{name:"string[]"}},isReadOnly:{defaultValue:null,description:"Whether the component cannot be modified",name:"isReadOnly",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:`Function, called everytime the user picks an option, receives array of string values as parameter
@param v`,name:"onChange",required:!0,type:{name:"(v: string[]) => void"}}}}}catch{}const U=[{value:"1",label:"One"},{value:"2",label:"Two"},{value:"3",label:"Three"},{value:"4",label:"Four"},{value:"5",label:"Five"}];export{_ as L,U as l};

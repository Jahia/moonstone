import{j as t,r as L}from"./iframe-BDgbDFAS.js";import{a as V,S as w}from"./ChevronDoubleRight-Dmt9H5aD.js";import{S as O}from"./ChevronRight-BzKl2nhP.js";import{S as q}from"./Close-Bkx_JcY5.js";import{c as T}from"./clsx-B-dksMZM.js";import{S as k}from"./HandleDrag-Bk-ZjIIp.js";import{o as I}from"./useAccessibleClick-Bdvd2I0f.js";import{L as A}from"./ListItem-DBKvzmOz.js";import{S as F}from"./SearchInput-DaIm19VZ.js";import{T as _}from"./Typography-DVmD2Ujz.js";import{B as j}from"./Button-YqBLSdH5.js";const x=({values:i,setFilter:y,iconEnd:s,draggedId:d,isReadOnly:o,listClasses:S=[],role:n,onClick:u,onDragStart:D,onDragEnd:g,onDragOver:N,onDrop:c})=>t.jsxs("div",{className:T("flexCol_nowrap","moonstone-valueList_wrapper",{"moonstone-valueList_wrapper_readOnly":o}),children:[t.jsx(F,{onChange:r=>y(r.target.value.trim())}),t.jsx("ul",{className:T("moonstone-valueList",...S),onDragOver:r=>N(r,null),onDrop:r=>c(r,null),children:i.map(r=>{const p=["moonstone-valueListItem"];return d===r.value&&r.tempItem?p.push("moonstone-noHoveEffect","moonstone-noOpacity"):d&&d!==r.value?p.push("moonstone-noHoveEffect"):d&&d===r.value&&p.push("moonstone-valueListItem","moonstone-dragging"),t.jsx(A,{role:n,iconStart:!o&&t.jsx("div",{className:"moonstone-iconContainer",draggable:"true",onDragStart:l=>D(l,r),onDragEnd:l=>g(l,r),children:t.jsx(k,{className:"moonstone-dragHandle"})}),iconEnd:!o&&(n==="left-list"?t.jsx("div",{className:"moonstone-iconContainer",children:s}):t.jsx("div",{className:"moonstone-iconContainer",onClick:l=>u(l,r),children:s})),className:T(...p),typographyVariant:"body",label:r.label,...I({onClick:l=>{!o&&n==="left-list"&&u(l,r)},disabled:o,role:n}),onDragOver:l=>{o||N(l,r)},onDrop:l=>{o||c(l,r)}},r.label)})})]});x.displayName="ValueList";try{x.displayName="ValueList",x.__docgenInfo={description:"",displayName:"ValueList",props:{values:{defaultValue:null,description:"List values",name:"values",required:!1,type:{name:"Value[]"}},setFilter:{defaultValue:null,description:"Set filter",name:"setFilter",required:!0,type:{name:"(filter: string) => void"}},iconEnd:{defaultValue:null,description:"Orientation of the list (left side / right side)",name:"iconEnd",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},draggedId:{defaultValue:null,description:"Dragged item value/id",name:"draggedId",required:!1,type:{name:"string"}},isReadOnly:{defaultValue:null,description:"Whether the component cannot be modified",name:"isReadOnly",required:!1,type:{name:"boolean"}},listClasses:{defaultValue:{value:"[]"},description:"Additional classes for <ul> element",name:"listClasses",required:!1,type:{name:"string[]"}},role:{defaultValue:null,description:"List role",name:"role",required:!0,type:{name:"string"}},onClick:{defaultValue:null,description:"OnClick callback",name:"onClick",required:!0,type:{name:"(e: MouseEvent<Element, MouseEvent>, value: Value) => void"}},onDragStart:{defaultValue:null,description:"OnDragStart callback",name:"onDragStart",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}},onDragEnd:{defaultValue:null,description:"OnDragEnd callback",name:"onDragEnd",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}},onDragOver:{defaultValue:null,description:"OnDragOver callback",name:"onDragOver",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}},onDrop:{defaultValue:null,description:"OnDrop callback",name:"onDrop",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}}}}}catch{}const f="mlrs_drag_list_item",C=({label:i={rightListTitle:"",leftListTitle:"",addAllTitle:"",removeAllTitle:"",selected:""},options:y=[],values:s=[],isReadOnly:d,onChange:o,...S})=>{const[n,u]=L.useState(null),D=i?.rightListTitle?.length>0||i?.leftListTitle?.length>0,[g,N]=L.useState(null),[c,r]=L.useState(null),p=y.filter(e=>!s.includes(e.value)).filter(e=>!g||g===""||e.label.toLowerCase().indexOf(g.toLowerCase())!==-1),l=s.map(e=>y.find(a=>a.value===e)).filter(e=>!c||c===""||e.label.toLowerCase().indexOf(c.toLowerCase())!==-1);return typeof n?.originalIndex=="number"&&l.splice(n.originalIndex,1),typeof n?.index=="number"&&l.splice(n.index,0,{...n.value,tempItem:typeof n.originalIndex!="number"}),t.jsxs("div",{className:T("flexRow_nowrap","moonstone-listSelector"),...S,children:[t.jsxs("div",{className:"moonstone-listSelector_left flexCol_nowrap flexFluid",children:[D&&t.jsx("header",{className:"moonstone-listSelector_title flexRow alignCenter",children:t.jsx(_,{isNowrap:!0,component:"h3",weight:"bold",children:i?.leftListTitle})}),t.jsx(x,{values:p,role:"left-list",iconEnd:t.jsx(O,{className:"moonstone-displayNone"}),isReadOnly:d,filter:g,setFilter:N,listClasses:typeof n?.originalIndex=="number"?["moonstone-draggedOver"]:[],draggedId:n?.value.value,onClick:(e,a)=>{o(s.concat(a.value))},onDragStart:(e,a)=>{e.stopPropagation();const m=e.currentTarget;setTimeout(()=>{m.parentNode.parentNode.style.opacity="0"},10),e.dataTransfer.setData(f,JSON.stringify({type:f,value:a})),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(e.currentTarget.parentNode.parentNode,10,10),u({value:a,from:"left"})},onDragEnd:e=>{e.stopPropagation(),e.currentTarget.parentNode.parentNode.style.opacity="1",u(null)},onDragOver:e=>{e.stopPropagation(),e.dataTransfer.types.includes(f)&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},onDrop:e=>{e.stopPropagation(),e.dataTransfer.types.includes(f)&&(o(s.filter(a=>a!==n.value.value)),u(null))}})]}),t.jsxs("div",{className:"moonstone-listSelector_buttons alignCenter flexCol_center",children:[t.jsx(j,{title:i.addAllTitle||"Add all",role:"add-all",variant:"ghost",isDisabled:d||p.length===0,icon:t.jsx(V,{}),onClick:()=>o([...l,...p].map(e=>e.value))}),t.jsx(j,{title:i.removeAllTitle||"Remove all",role:"remove-all",variant:"ghost",isDisabled:d||l.length===0,icon:t.jsx(w,{}),onClick:()=>o(s.filter(e=>!l.find(a=>a.value===e)))})]}),t.jsxs("div",{className:"moonstone-listSelector_right flexCol_nowrap flexFluid",children:[D&&t.jsx("header",{className:"moonstone-listSelector_title flexRow alignCenter",children:t.jsx(_,{isNowrap:!0,component:"h3",weight:"bold",children:i?.rightListTitle})}),t.jsx(x,{values:l,role:"right-list",iconEnd:t.jsx(q,{className:"moonstone-displayNone"}),isReadOnly:d,label:i,filter:c,setFilter:r,listClasses:n&&!c?["moonstone-draggedOver"]:[],draggedId:n?.value.value,onClick:(e,a)=>{o(s.filter(m=>m!==a.value))},onDragStart:(e,a)=>{e.stopPropagation();const m=e.currentTarget;setTimeout(()=>{m.parentNode.parentNode.style.opacity="0"},10),e.dataTransfer.setData(f,JSON.stringify({type:f,value:a})),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(e.currentTarget.parentNode.parentNode,10,10),u({value:a,originalIndex:l.indexOf(a),index:l.indexOf(a),from:"right"})},onDragEnd:e=>{e.stopPropagation(),e.currentTarget.parentNode.parentNode.style.opacity="1",u(null)},onDragOver:(e,a)=>{if(e.stopPropagation(),e.dataTransfer.types.includes(f)&&!c){e.preventDefault(),e.dataTransfer.dropEffect="move";const m=e.currentTarget.getBoundingClientRect(),b={x:e.clientX,y:e.clientY},E=m.y+m.height/2;let v=-1;a&&n?.value?.value!==a.value?(b.y<E&&(v=l.filter(h=>h.value!==n.value.value).indexOf(a)),b.y>E&&(v=l.filter(h=>h.value!==n.value.value).indexOf(a)+1)):a||(v=l.length),v!==-1&&n.index!==v&&u(h=>({...h,index:v}))}},onDrop:e=>{e.stopPropagation(),e.dataTransfer.types.includes(f)&&(o(l.map(a=>a.value)),u(null))}}),t.jsx("footer",{className:"moonstone-listSelector_footer flexRow alignCenter",children:s.length>0&&t.jsx(_,{variant:"caption",weight:"semiBold",children:i.selected||"0 item selected"})})]})]})};C.displayName="ListSelector";try{C.displayName="ListSelector",C.__docgenInfo={description:"",displayName:"ListSelector",props:{label:{defaultValue:{value:`{
        rightListTitle: '',
        leftListTitle: '',
        addAllTitle: '',
        removeAllTitle: '',
        selected: ''
    }`},description:"Labels for component",name:"label",required:!1,type:{name:"Label"}},options:{defaultValue:{value:"[]"},description:"Options for left list",name:"options",required:!1,type:{name:"Option[]"}},values:{defaultValue:{value:"[]"},description:"Picked values, these are option values which should be recorded in onChange",name:"values",required:!1,type:{name:"string[]"}},isReadOnly:{defaultValue:null,description:"Whether the component cannot be modified",name:"isReadOnly",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:`Function, called everytime the user picks an option, receives array of string values as parameter
@param v`,name:"onChange",required:!0,type:{name:"(v: string[]) => void"}}}}}catch{}const K=[{value:"1",label:"One"},{value:"2",label:"Two"},{value:"3",label:"Three"},{value:"4",label:"Four"},{value:"5",label:"Five"}];export{C as L,K as l};

import{j as n}from"./jsx-runtime-Cf8x2fCZ.js";import{r as S}from"./index-G8LIXM5I.js";import{B as q}from"./Button-CgeSGZUR.js";import{c as C}from"./clsx-B-dksMZM.js";import{o as I}from"./useAccessibleClick-Dg2YirTu.js";import{L as b}from"./ListItem-Crrcgnf0.js";import{S as k}from"./HandleDrag-D6n6KY9w.js";import{S as A}from"./SearchInput-DQDkqlfu.js";import{S as F}from"./ChevronRight-CtX5Dnjk.js";import{a as R,S as P}from"./ChevronDoubleRight-DJ_10qPq.js";import{S as B}from"./Close-Dt0TtWGW.js";import{T as L}from"./Typography-C8hU4Ja4.js";const x=({values:o,setFilter:y,iconEnd:s,draggedId:u,isReadOnly:i,listClasses:T=[],role:t,onClick:d,onDragStart:D,onDragEnd:g,onDragOver:N,onDrop:c})=>n.jsxs("div",{className:"flexCol_nowrap moonstone-valueList_wrapper",children:[n.jsx(A,{onChange:r=>y(r.target.value.trim())}),n.jsx("ul",{className:C("moonstone-valueList",...T),onDragOver:r=>N(r,null),onDrop:r=>c(r,null),children:o.map(r=>{const m=["moonstone-valueListItem"];return u===r.value&&r.tempItem?m.push("moonstone-noHoveEffect","moonstone-noOpacity"):u&&u!==r.value?m.push("moonstone-noHoveEffect"):u&&u===r.value&&m.push("moonstone-valueListItem","moonstone-dragging"),n.jsx(b,{role:t,iconStart:!i&&n.jsx("div",{className:"moonstone-iconContainer",draggable:"true",onDragStart:l=>D(l,r),onDragEnd:l=>g(l,r),children:n.jsx(k,{className:"moonstone-dragHandle"})}),iconEnd:!i&&(t==="left-list"?n.jsx("div",{className:"moonstone-iconContainer",children:s}):n.jsx("div",{className:"moonstone-iconContainer",onClick:l=>d(l,r),children:s})),className:C(...m),typographyVariant:"body",label:r.label,...I(l=>{!i&&t==="left-list"&&d(l,r)},i,t),onDragOver:l=>{i||N(l,r)},onDrop:l=>{i||c(l,r)}},r.label)})})]});x.displayName="ValueList";try{x.displayName="ValueList",x.__docgenInfo={description:"",displayName:"ValueList",props:{values:{defaultValue:null,description:"List values",name:"values",required:!1,type:{name:"Value[]"}},setFilter:{defaultValue:null,description:"Set filter",name:"setFilter",required:!0,type:{name:"(filter: string) => void"}},iconEnd:{defaultValue:null,description:"Orientation of the list (left side / right side)",name:"iconEnd",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},draggedId:{defaultValue:null,description:"Dragged item value/id",name:"draggedId",required:!1,type:{name:"string"}},isReadOnly:{defaultValue:null,description:"Whether the component cannot be modified",name:"isReadOnly",required:!1,type:{name:"boolean"}},listClasses:{defaultValue:{value:"[]"},description:"Additional classes for <ul> element",name:"listClasses",required:!1,type:{name:"string[]"}},role:{defaultValue:null,description:"List role",name:"role",required:!0,type:{name:"string"}},onClick:{defaultValue:null,description:"OnClick callback",name:"onClick",required:!0,type:{name:"(e: MouseEvent<Element, MouseEvent>, value: Value) => void"}},onDragStart:{defaultValue:null,description:"OnDragStart callback",name:"onDragStart",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}},onDragEnd:{defaultValue:null,description:"OnDragEnd callback",name:"onDragEnd",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}},onDragOver:{defaultValue:null,description:"OnDragOver callback",name:"onDragOver",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}},onDrop:{defaultValue:null,description:"OnDrop callback",name:"onDrop",required:!0,type:{name:"(e: DragEvent<Element>, value: Value) => void"}}}}}catch{}const f="mlrs_drag_list_item",_=({label:o={rightListTitle:"",leftListTitle:"",addAllTitle:"",removeAllTitle:"",selected:""},options:y=[],values:s=[],isReadOnly:u,onChange:i,...T})=>{var E,j;const[t,d]=S.useState(null),D=((E=o==null?void 0:o.rightListTitle)==null?void 0:E.length)>0||((j=o==null?void 0:o.leftListTitle)==null?void 0:j.length)>0,[g,N]=S.useState(null),[c,r]=S.useState(null),m=y.filter(e=>!s.includes(e.value)).filter(e=>!g||g===""||e.label.toLowerCase().indexOf(g.toLowerCase())!==-1),l=s.map(e=>y.find(a=>a.value===e)).filter(e=>!c||c===""||e.label.toLowerCase().indexOf(c.toLowerCase())!==-1);return typeof(t==null?void 0:t.originalIndex)=="number"&&l.splice(t.originalIndex,1),typeof(t==null?void 0:t.index)=="number"&&l.splice(t.index,0,{...t.value,tempItem:typeof t.originalIndex!="number"}),n.jsxs("div",{className:C("flexRow_nowrap","moonstone-listSelector"),...T,children:[n.jsxs("div",{className:"moonstone-listSelector_left flexCol_nowrap flexFluid",children:[D&&n.jsx("header",{className:"moonstone-listSelector_title flexRow alignCenter",children:n.jsx(L,{isNowrap:!0,component:"h3",weight:"bold",children:o==null?void 0:o.leftListTitle})}),n.jsx(x,{values:m,role:"left-list",iconEnd:n.jsx(F,{className:"moonstone-displayNone"}),isReadOnly:u,filter:g,setFilter:N,listClasses:typeof(t==null?void 0:t.originalIndex)=="number"?["moonstone-draggedOver"]:[],draggedId:t==null?void 0:t.value.value,onClick:(e,a)=>{i(s.concat(a.value))},onDragStart:(e,a)=>{e.stopPropagation();const p=e.currentTarget;setTimeout(()=>{p.parentNode.parentNode.style.opacity="0"},10),e.dataTransfer.setData(f,JSON.stringify({type:f,value:a})),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(e.currentTarget.parentNode.parentNode,10,10),d({value:a,from:"left"})},onDragEnd:e=>{e.stopPropagation(),e.currentTarget.parentNode.parentNode.style.opacity="1",d(null)},onDragOver:e=>{e.stopPropagation(),e.dataTransfer.types.includes(f)&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},onDrop:e=>{e.stopPropagation(),e.dataTransfer.types.includes(f)&&(i(s.filter(a=>a!==t.value.value)),d(null))}})]}),n.jsxs("div",{className:"moonstone-listSelector_buttons alignCenter flexCol_center",children:[n.jsx(q,{title:o.addAllTitle||"Add all",role:"add-all",variant:"ghost",isDisabled:u||m.length===0,icon:n.jsx(R,{}),onClick:()=>i([...l,...m].map(e=>e.value))}),n.jsx(q,{title:o.removeAllTitle||"Remove all",role:"remove-all",variant:"ghost",isDisabled:u||l.length===0,icon:n.jsx(P,{}),onClick:()=>i(s.filter(e=>!l.find(a=>a.value===e)))})]}),n.jsxs("div",{className:"moonstone-listSelector_right flexCol_nowrap flexFluid",children:[D&&n.jsx("header",{className:"moonstone-listSelector_title flexRow alignCenter",children:n.jsx(L,{isNowrap:!0,component:"h3",weight:"bold",children:o==null?void 0:o.rightListTitle})}),n.jsx(x,{values:l,role:"right-list",iconEnd:n.jsx(B,{className:"moonstone-displayNone"}),isReadOnly:u,label:o,filter:c,setFilter:r,listClasses:t&&!c?["moonstone-draggedOver"]:[],draggedId:t==null?void 0:t.value.value,onClick:(e,a)=>{i(s.filter(p=>p!==a.value))},onDragStart:(e,a)=>{e.stopPropagation();const p=e.currentTarget;setTimeout(()=>{p.parentNode.parentNode.style.opacity="0"},10),e.dataTransfer.setData(f,JSON.stringify({type:f,value:a})),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(e.currentTarget.parentNode.parentNode,10,10),d({value:a,originalIndex:l.indexOf(a),index:l.indexOf(a),from:"right"})},onDragEnd:e=>{e.stopPropagation(),e.currentTarget.parentNode.parentNode.style.opacity="1",d(null)},onDragOver:(e,a)=>{var p;if(e.stopPropagation(),e.dataTransfer.types.includes(f)&&!c){e.preventDefault(),e.dataTransfer.dropEffect="move";const V=e.currentTarget.getBoundingClientRect(),w={x:e.clientX,y:e.clientY},O=V.y+V.height/2;let v=-1;a&&((p=t==null?void 0:t.value)==null?void 0:p.value)!==a.value?(w.y<O&&(v=l.filter(h=>h.value!==t.value.value).indexOf(a)),w.y>O&&(v=l.filter(h=>h.value!==t.value.value).indexOf(a)+1)):a||(v=l.length),v!==-1&&t.index!==v&&d(h=>({...h,index:v}))}},onDrop:e=>{e.stopPropagation(),e.dataTransfer.types.includes(f)&&(i(l.map(a=>a.value)),d(null))}}),n.jsx("footer",{className:"moonstone-listSelector_footer flexRow alignCenter",children:s.length>0&&n.jsx(L,{variant:"caption",weight:"semiBold",children:o.selected||"0 item selected"})})]})]})};_.displayName="ListSelector";try{_.displayName="ListSelector",_.__docgenInfo={description:"",displayName:"ListSelector",props:{label:{defaultValue:{value:`{
        rightListTitle: '',
        leftListTitle: '',
        addAllTitle: '',
        removeAllTitle: '',
        selected: ''
    }`},description:"Labels for component",name:"label",required:!1,type:{name:"Label"}},options:{defaultValue:{value:"[]"},description:"Options for left list",name:"options",required:!1,type:{name:"Option[]"}},values:{defaultValue:{value:"[]"},description:"Picked values, these are option values which should be recorded in onChange",name:"values",required:!1,type:{name:"string[]"}},isReadOnly:{defaultValue:null,description:"Whether the component cannot be modified",name:"isReadOnly",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:`Function, called everytime the user picks an option, receives array of string values as parameter
@param v`,name:"onChange",required:!0,type:{name:"(v: string[]) => void"}}}}}catch{}const $=[{value:"1",label:"One"},{value:"2",label:"Two"},{value:"3",label:"Three"},{value:"4",label:"Four"},{value:"5",label:"Five"}];export{_ as L,$ as l};

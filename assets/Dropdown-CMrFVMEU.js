import{j as l}from"./jsx-runtime-Cf8x2fCZ.js";import{r as g}from"./index-G8LIXM5I.js";import{c as P}from"./clsx-B-dksMZM.js";import{B as ae}from"./Button-PNeZ7oHi.js";import{T as ie}from"./Tag-CXHcMMTy.js";import{S as oe}from"./Search-DSeLwkIx.js";import{S as re}from"./ChevronDown-DW4Cg-no.js";import{a as le,M as X,u as se}from"./MenuItem--HqnKiEf.js";import{S as ue}from"./SearchInput-B5d-1pc8.js";import{T as de}from"./TreeView-BRFIKiCq.js";import{S as ce}from"./Separator-ChTYNnEP.js";import{S as pe,a as me}from"./CheckboxUnchecked-CIfxf0rQ.js";import{T as he}from"./Typography-C8hU4Ja4.js";const B=({isDisplayed:e,anchorPosition:n,minWidth:t,maxWidth:o,maxHeight:r,anchorEl:d,hasSearch:v,autoAddSearchLimit:N,searchEmptyText:x,data:w,value:T,values:b,imageSize:h,handleSelect:S,handleKeyPress:V,onClose:D})=>{const q=i=>(b==null?void 0:b.indexOf(i.value))>-1?l.jsx(pe,{role:"checkbox",color:"blue"}):l.jsx(me,{role:"checkbox"}),E=i=>l.jsx(X,{role:"option",iconStart:b?q(i):i.iconStart,iconSize:"default",label:i.label,description:i.description,iconEnd:i.iconEnd,isDisabled:i.isDisabled,isSelected:T===i.value,image:i.image,imageSize:h,onClick:c=>S(c,i),onKeyPress:c=>V(c,i),...i.attributes},i.value),L=(i,c,y)=>l.jsxs("div",{"data-option-type":"group",children:[y>0&&l.jsx(ce,{}),l.jsx(X,{variant:"title",label:c}),i.map(p=>E(p))]},`${c}-${y}`);return w.length===0?null:l.jsx(le,{isDisplayed:e,position:"fixed",anchorPosition:n,minWidth:t,maxWidth:o,maxHeight:r,anchorEl:d,hasSearch:v,autoAddSearchLimit:N,searchEmptyText:x,onClose:D,children:w.map((i,c)=>"options"in i&&"groupLabel"in i?(i.options.map(y=>E(y)),L(i.options,i.groupLabel,c)):E(i))})};try{B.displayName="DropdownMenu",B.__docgenInfo={description:"",displayName:"DropdownMenu",props:{style:{defaultValue:null,description:"Additional styles",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onMouseEnter:{defaultValue:null,description:"Function triggered when the mouse pointer hovering the menu",name:"onMouseEnter",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onMouseLeave:{defaultValue:null,description:"Function triggered when the mouse pointer move off the menu",name:"onMouseLeave",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},maxHeight:{defaultValue:null,description:"Maximum height of the Menu",name:"maxHeight",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"Maximum width of the Menu",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"Minimum width of the Menu",name:"minWidth",required:!1,type:{name:"string"}},isDisplayed:{defaultValue:null,description:"Menu is display",name:"isDisplayed",required:!0,type:{name:"boolean"}},anchorEl:{defaultValue:null,description:"Reference element to positioning the menu",name:"anchorEl",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},anchorPosition:{defaultValue:null,description:"Position of the menu in px relative to anchorEl or the document",name:"anchorPosition",required:!1,type:{name:"AnchorPosition"}},anchorElOrigin:{defaultValue:null,description:"Point on the anchor where the menu's anchorEl will attach to",name:"anchorElOrigin",required:!1,type:{name:"AnchorElOrigin"}},transformElOrigin:{defaultValue:null,description:"This is the point on the menu which will attach to the anchor's origin",name:"transformElOrigin",required:!1,type:{name:"TransformElOrigin"}},hasSearch:{defaultValue:null,description:`Whether the Menu displays a search input at the top
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:null,description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:null,description:"Text to display when the search doesn't show any results",name:"searchEmptyText",required:!1,type:{name:"string"}},position:{defaultValue:null,description:`If 'absolute' is passed in for the position, the component will be positioned as per normal
CSS rules (i.e., positioned against the closest positioned ancestor). Position is 'fixed' by default`,name:"position",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},onClose:{defaultValue:null,description:"Function triggered when the menu close",name:"onClose",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onEntering:{defaultValue:null,description:"Function triggered when the menu is going to be opened (before open)",name:"onEntering",required:!1,type:{name:"() => void"}},onEntered:{defaultValue:null,description:"Function triggered when the menu has been opened (after open)",name:"onEntered",required:!1,type:{name:"() => void"}},onExiting:{defaultValue:null,description:"Function triggered when the menu is going to be closed (before exit)",name:"onExiting",required:!1,type:{name:"() => void"}},onExited:{defaultValue:null,description:"Function triggered when the menu has been closed (after exit)",name:"onExited",required:!1,type:{name:"() => void"}},hasOverlay:{defaultValue:null,description:"The menu has overlay or not",name:"hasOverlay",required:!1,type:{name:"boolean"}},searchInput:{defaultValue:null,description:"",name:"searchInput",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"DropdownData"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[]"}},imageSize:{defaultValue:null,description:"",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},handleSelect:{defaultValue:null,description:"",name:"handleSelect",required:!0,type:{name:"(e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>, item?: DropdownDataOption) => void"}},handleKeyPress:{defaultValue:null,description:"",name:"handleKeyPress",required:!0,type:{name:"(e?: KeyboardEvent<Element>, item?: DropdownDataOption) => void"}}}}}catch{}function Y(e,n,t){const o=[];return n.forEach(r=>{const d=fe(e,r,t);d&&o.push(d)}),o}const fe=(e,n,t)=>{const o=e(n),r=[];if(n.children){const d=Y(e,n.children,t);d.length>0&&(r.push(...d),t.push(n.id))}if(o||r.length>0)return{...n,treeItemProps:{className:P({"moonstone-disabled":!o})},isDisabled:!o,children:r}},z=(e,n,t)=>{if(e(n))return n;if(n.children){const o=n.children.reduce((r,d)=>r||z(e,d,t),null);return o&&t&&t.push(n.id),o}},ye=e=>{var o;const n=[],t=r=>{n.push(r),r.children&&r.children.forEach(t)};return(o=e==null?void 0:e.forEach)==null||o.call(e,t),n},I=({isDisplayed:e,minWidth:n,maxWidth:t,maxHeight:o,anchorEl:r,anchorPosition:d,anchorElOrigin:v,transformElOrigin:N,position:x,hasOverlay:w,hasSearch:T,autoAddSearchLimit:b,treeData:h,value:S,values:V,handleSelect:D,onClose:q})=>{var O;const[E,L]=se(e,d,r,v,N,x),[i,c]=g.useState(""),[y,p]=g.useState([]),C=u=>{p(m=>[...m,u.id])},R=u=>{p(m=>m.filter(f=>f!==u.id))},A=[],j=[];i!==""&&(h=Y(u=>u.label.toLowerCase().includes(i.toLowerCase()),h,A)),S&&h.forEach(u=>{const m=z(f=>f.value===S,u,A);m&&j.push(m.id)}),V&&V.forEach(u=>{h.forEach(m=>{const f=z(K=>K.value===u,m,A);f&&j.push(f.id)})});const _={position:x,...E};n&&(_.minWidth=n),t&&(_.maxWidth=t),o&&(_.maxHeight=o);let M=T;return typeof T>"u"&&(M=((O=ye(h))==null?void 0:O.length)>b),l.jsxs(l.Fragment,{children:[l.jsxs("menu",{ref:L,className:"moonstone-menu",style:_,children:[M&&l.jsx("div",{className:"moonstone-menu_searchInput",children:l.jsx(ue,{value:i,onChange:u=>c(u.target.value),onKeyPress:u=>{if(u.key==="Enter"&&h.length>0){const m=z(f=>!f.isDisabled,h[0]);m&&D(u,m)}},onClear:()=>c("")})}),l.jsx(de,{data:h,selectedItems:j,size:"small",showCheckbox:!!V,openedItems:[...y,...A],onOpenItem:C,onCloseItem:R,onClickItem:(u,m)=>{D(m,u)}})]}),w&&e&&l.jsx("div",{"aria-hidden":"true",className:"moonstone-menu_overlay",onClick:q,onContextMenu:q})]})};I.defaultProps={hasOverlay:!0,autoAddSearchLimit:7,searchEmptyText:"No results found.",position:"fixed",anchorEl:null,anchorPosition:{top:0,left:0},anchorElOrigin:{vertical:"bottom",horizontal:"left"},transformElOrigin:{vertical:"top",horizontal:"left"}};I.displayName="TreeViewMenu";try{I.displayName="TreeViewMenu",I.__docgenInfo={description:"",displayName:"TreeViewMenu",props:{style:{defaultValue:null,description:"Additional styles",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onMouseEnter:{defaultValue:null,description:"Function triggered when the mouse pointer hovering the menu",name:"onMouseEnter",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onMouseLeave:{defaultValue:null,description:"Function triggered when the mouse pointer move off the menu",name:"onMouseLeave",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},maxHeight:{defaultValue:null,description:"Maximum height of the Menu",name:"maxHeight",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"Maximum width of the Menu",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"Minimum width of the Menu",name:"minWidth",required:!1,type:{name:"string"}},isDisplayed:{defaultValue:null,description:"Menu is display",name:"isDisplayed",required:!0,type:{name:"boolean"}},anchorEl:{defaultValue:{value:"null"},description:"Reference element to positioning the menu",name:"anchorEl",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},anchorPosition:{defaultValue:{value:`{
        top: 0,
        left: 0
    }`},description:"Position of the menu in px relative to anchorEl or the document",name:"anchorPosition",required:!1,type:{name:"AnchorPosition"}},anchorElOrigin:{defaultValue:{value:`{
        vertical: 'bottom',
        horizontal: 'left'
    }`},description:"Point on the anchor where the menu's anchorEl will attach to",name:"anchorElOrigin",required:!1,type:{name:"AnchorElOrigin"}},transformElOrigin:{defaultValue:{value:`{
        vertical: 'top',
        horizontal: 'left'
    }`},description:"This is the point on the menu which will attach to the anchor's origin",name:"transformElOrigin",required:!1,type:{name:"TransformElOrigin"}},hasSearch:{defaultValue:null,description:`Whether the Menu displays a search input at the top
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:{value:"7"},description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:{value:"No results found."},description:"Text to display when the search doesn't show any results",name:"searchEmptyText",required:!1,type:{name:"string"}},position:{defaultValue:{value:"fixed"},description:`If 'absolute' is passed in for the position, the component will be positioned as per normal
CSS rules (i.e., positioned against the closest positioned ancestor). Position is 'fixed' by default`,name:"position",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},onClose:{defaultValue:null,description:"Function triggered when the menu close",name:"onClose",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onEntering:{defaultValue:null,description:"Function triggered when the menu is going to be opened (before open)",name:"onEntering",required:!1,type:{name:"() => void"}},onEntered:{defaultValue:null,description:"Function triggered when the menu has been opened (after open)",name:"onEntered",required:!1,type:{name:"() => void"}},onExiting:{defaultValue:null,description:"Function triggered when the menu is going to be closed (before exit)",name:"onExiting",required:!1,type:{name:"() => void"}},onExited:{defaultValue:null,description:"Function triggered when the menu has been closed (after exit)",name:"onExited",required:!1,type:{name:"() => void"}},hasOverlay:{defaultValue:{value:"true"},description:"The menu has overlay or not",name:"hasOverlay",required:!1,type:{name:"boolean"}},treeData:{defaultValue:null,description:"Data to generate the tree",name:"treeData",required:!0,type:{name:"TreeViewData[]"}},searchInput:{defaultValue:null,description:"",name:"searchInput",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[]"}},imageSize:{defaultValue:null,description:"",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},handleSelect:{defaultValue:null,description:"",name:"handleSelect",required:!0,type:{name:"(e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>, item?: DropdownDataOption) => void"}},handleKeyPress:{defaultValue:null,description:"",name:"handleKeyPress",required:!1,type:{name:"(e?: KeyboardEvent<Element>, item?: DropdownDataOption) => void"}}}}}catch{}const ge=e=>{var o;const n=[],t=r=>{n.push(r),r.children&&r.children.forEach(t)};return(o=e==null?void 0:e.forEach)==null||o.call(e,t),n},ve=e=>Array.isArray(e)?e.every(n=>"options"in n&&"groupLabel"in n):!1,Q=(e,n)=>ve(e)?e.reduce((t,o)=>t.concat(o.options),[]).find(t=>t.value===n):e.find(t=>t.value===n),$=({data:e,treeData:n,label:t,placeholder:o,value:r,values:d,isDisabled:v,variant:N="ghost",size:x="medium",icon:w,hasSearch:T,autoAddSearchLimit:b=7,searchEmptyText:h="No results found.",imageSize:S,onClear:V,onChange:D,onBlur:q,onFocus:E,className:L,...i})=>{var U;const[c,y]=g.useState(!1),[p,C]=g.useState({focused:!1,event:null,lastSent:!1}),[R,A]=g.useState(null),[j,_]=g.useState(null),M=g.useRef(),O=Array.isArray(n),u=g.useMemo(()=>O?ge(n):e,[n,e,O]),m=u.length===0;if(g.useEffect(()=>{p.focused&&p.event&&!p.lastSent&&E&&(E(p.event),C(a=>({...a,lastSent:!0})))},[E,p]),g.useEffect(()=>{!p.focused&&!c&&p.event&&p.lastSent&&q&&(q(p.event),C(a=>({...a,lastSent:!1})))},[q,c,p]),!Array.isArray(u))return null;const f=80,K={top:4,left:0};let F,k;switch(S){case"big":F="400px",k="440px";break;case"small":F="264px",k="320px";break;default:F="250px",k="270px"}const G=a=>{a.stopPropagation();const s=a.currentTarget.offsetWidth;_(`${s<f?f:s}px`),A(a.currentTarget),y(!0)},W=(a,s)=>{if(s)if(d)s.isDisabled||(a.stopPropagation(),D(a,s));else{let H=!s.isDisabled;!s.isDisabled&&s.value!==r&&(a.stopPropagation(),H=D(a,s)),H!==!1&&y(!1)}},Z=()=>{y(!1),A(null)},ee=(a,s)=>{a.key==="Enter"&&W(a,s)},J=r||(d==null?void 0:d.length)>0,ne=P(!t&&!w?"flexRow_reverse":"flexRow_between","alignCenter","moonstone-dropdown",`moonstone-${x}`,`moonstone-dropdown_${N}`,{"moonstone-disabled":typeof v>"u"&&m?!0:v,"moonstone-filled":J,"moonstone-opened":c}),te=O?I:B;return l.jsxs("div",{className:P("moonstone-dropdown_container",L),...i,onKeyPress:a=>{a.key==="Enter"&&!v&&G(a)},children:[l.jsxs("div",{ref:M,role:"dropdown",className:P(ne),tabIndex:0,onClick:!v&&G,onKeyPress:a=>{a.key==="Enter"&&W(a)},onBlur:a=>{C(s=>({...s,focused:!1,event:a}))},onFocus:a=>{C(s=>({...s,focused:!0,event:a}))},children:[w&&l.jsx(w.type,{...w.props,size:"default",className:P("moonstone-dropdown_icon")}),!t&&d&&d.length>0?l.jsx("div",{className:"moonstone-dropdown_tags flexFluid flexRow",children:d.map(a=>{const s=Q(u,a);return s&&l.jsx(ie,{label:s.label,value:s.value,size:x,onClick:H=>{M.current.focus(),M.current.blur(),W(H,s)}},s.value)})}):l.jsx(he,{isNowrap:!0,variant:x==="small"?"caption":"body",component:"span",className:P("flexFluid","moonstone-dropdown_label"),title:t,children:t||((U=Q(u,r))==null?void 0:U.label)||o}),V&&J&&!v&&l.jsx(ae,{className:"moonstone-baseInput_clearButton flexRow_center alignCenter",variant:"ghost",icon:l.jsx(oe,{}),"aria-label":"Reset",onClick:a=>{a.stopPropagation(),M.current.focus(),M.current.blur(),V(a)}}),l.jsx(re,{className:"moonstone-dropdown_chevronDown"})]}),c&&l.jsx(te,{isDisplayed:!0,data:e,treeData:n,value:r,values:d,anchorPosition:K,minWidth:j,maxWidth:F,maxHeight:k,anchorEl:R,hasSearch:T,autoAddSearchLimit:b,searchEmptyText:h,handleKeyPress:ee,handleSelect:W,imageSize:S,onClose:Z})]})};$.displayName="Dropdown";try{$.displayName="Dropdown",$.__docgenInfo={description:"",displayName:"Dropdown",props:{data:{defaultValue:null,description:"Content of the dropdown",name:"data",required:!1,type:{name:"DropdownData"}},treeData:{defaultValue:null,description:"Content of the dropdown, if tree",name:"treeData",required:!1,type:{name:"DropdownDataTree"}},placeholder:{defaultValue:null,description:"Text for dropdown, when no value is selected",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label of the dropdown",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Value of the dropdown",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"Value of the dropdown",name:"values",required:!1,type:{name:"string[]"}},icon:{defaultValue:null,description:"Icon displays before the dropdown's label",name:"icon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},variant:{defaultValue:{value:"ghost"},description:"Dropdown's variants",name:"variant",required:!1,type:{name:"enum",value:[{value:'"ghost"'},{value:'"outlined"'}]}},size:{defaultValue:{value:"medium"},description:"Dropdown's sizes",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'}]}},imageSize:{defaultValue:null,description:"Size of images to show in the Dropdown",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},isDisabled:{defaultValue:null,description:"Whether the component should be disabled",name:"isDisabled",required:!1,type:{name:"boolean"}},hasSearch:{defaultValue:null,description:`Whether the Menu within the Dropdown has a search input
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:{value:"7"},description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:{value:"No results found."},description:"The text to display if the Dropdown Menu has a search input and the search doesn't have any results",name:"searchEmptyText",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Function - when passed in, the Clear icon appears at the end of the input and its click event is passed back when the Clear icon is clicked",name:"onClear",required:!1,type:{name:"MouseEventHandler<Element>"}},onChange:{defaultValue:null,description:`Function trigger on change with the current option as param
@param event - Mouse event
@param item - The current item selected`,name:"onChange",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>, item: DropdownDataOption) => void"}},onFocus:{defaultValue:null,description:"Function triggered on focus of the checkbox value",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"Function triggered when the checkbox value loses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}}}}}catch{}export{$ as D};

import{j as l}from"./jsx-runtime-Cf8x2fCZ.js";import{r as w}from"./index-G8LIXM5I.js";import{c as L}from"./clsx-B-dksMZM.js";import{B as ie}from"./Button-BaB_rorB.js";import{T as oe}from"./Tag-B_zZEzlB.js";import{S as re}from"./Search-DSeLwkIx.js";import{S as le}from"./ChevronDown-DW4Cg-no.js";import{a as se,M as Y,u as ue}from"./MenuItem-CJE6ZKnX.js";import{S as de}from"./SearchInput-BXjOjnse.js";import{T as ce}from"./TreeView-GmiiSYVy.js";import{o as pe}from"./useAccessibleClick-Bdvd2I0f.js";import{S as me}from"./Separator-B3Ws4ABk.js";import{S as he,a as fe}from"./CheckboxUnchecked-CIfxf0rQ.js";import{T as ye}from"./Typography-CgHbMZIy.js";const $=({isDisplayed:e,anchorPosition:n,minWidth:t,maxWidth:o,maxHeight:r,anchorEl:d,hasSearch:m,autoAddSearchLimit:P,searchEmptyText:x,data:E,value:C,values:b,imageSize:h,handleSelect:M,onClose:V})=>{const S=a=>(b==null?void 0:b.indexOf(a.value))>-1?l.jsx(he,{role:"checkbox",color:"blue"}):l.jsx(fe,{role:"checkbox"}),v=a=>l.jsx(Y,{iconStart:b?S(a):a.iconStart,iconSize:"default",label:a.label,description:a.description,iconEnd:a.iconEnd,isDisabled:a.isDisabled,isSelected:C===a.value,image:a.image,imageSize:h,...pe({onClick:f=>M(f,a),disabled:a.isDisabled,role:"option"}),...a.attributes},a.value),D=(a,f,y)=>l.jsxs("div",{"data-option-type":"group",children:[y>0&&l.jsx(me,{}),l.jsx(Y,{variant:"title",label:f}),a.map(A=>v(A))]},`${f}-${y}`);return E.length===0?null:l.jsx(se,{isDisplayed:e,position:"fixed",anchorPosition:n,minWidth:t,maxWidth:o,maxHeight:r,anchorEl:d,hasSearch:m,autoAddSearchLimit:P,searchEmptyText:x,onClose:V,children:E.map((a,f)=>"options"in a&&"groupLabel"in a?(a.options.map(y=>v(y)),D(a.options,a.groupLabel,f)):v(a))})};try{$.displayName="DropdownMenu",$.__docgenInfo={description:"",displayName:"DropdownMenu",props:{style:{defaultValue:null,description:"Additional styles",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onMouseEnter:{defaultValue:null,description:"Function triggered when the mouse pointer hovering the menu",name:"onMouseEnter",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onMouseLeave:{defaultValue:null,description:"Function triggered when the mouse pointer move off the menu",name:"onMouseLeave",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},hasSearch:{defaultValue:null,description:`Whether the Menu displays a search input at the top
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:null,description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:null,description:"Text to display when the search doesn't show any results",name:"searchEmptyText",required:!1,type:{name:"string"}},maxHeight:{defaultValue:null,description:"Maximum height of the Menu",name:"maxHeight",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"Maximum width of the Menu",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"Minimum width of the Menu",name:"minWidth",required:!1,type:{name:"string"}},isDisplayed:{defaultValue:null,description:"Menu is display",name:"isDisplayed",required:!0,type:{name:"boolean"}},anchorEl:{defaultValue:null,description:"Reference element to positioning the menu",name:"anchorEl",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},anchorPosition:{defaultValue:null,description:"Position of the menu in px relative to anchorEl or the document",name:"anchorPosition",required:!1,type:{name:"AnchorPosition"}},anchorElOrigin:{defaultValue:null,description:"Point on the anchor where the menu's anchorEl will attach to",name:"anchorElOrigin",required:!1,type:{name:"AnchorElOrigin"}},transformElOrigin:{defaultValue:null,description:"This is the point on the menu which will attach to the anchor's origin",name:"transformElOrigin",required:!1,type:{name:"TransformElOrigin"}},position:{defaultValue:null,description:`If 'absolute' is passed in for the position, the component will be positioned as per normal
CSS rules (i.e., positioned against the closest positioned ancestor). Position is 'fixed' by default`,name:"position",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},onClose:{defaultValue:null,description:"Function triggered when the menu close",name:"onClose",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onEntering:{defaultValue:null,description:"Function triggered when the menu is going to be opened (before open)",name:"onEntering",required:!1,type:{name:"() => void"}},onEntered:{defaultValue:null,description:"Function triggered when the menu has been opened (after open)",name:"onEntered",required:!1,type:{name:"() => void"}},onExiting:{defaultValue:null,description:"Function triggered when the menu is going to be closed (before exit)",name:"onExiting",required:!1,type:{name:"() => void"}},onExited:{defaultValue:null,description:"Function triggered when the menu has been closed (after exit)",name:"onExited",required:!1,type:{name:"() => void"}},hasOverlay:{defaultValue:null,description:"The menu has overlay or not",name:"hasOverlay",required:!1,type:{name:"boolean"}},searchInput:{defaultValue:null,description:"",name:"searchInput",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"DropdownData"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[]"}},imageSize:{defaultValue:null,description:"",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},handleSelect:{defaultValue:null,description:"",name:"handleSelect",required:!0,type:{name:"(e?: KeyboardEvent<Element> | MouseEvent<Element, MouseEvent>, item?: DropdownDataOption) => void"}},handleKeyPress:{defaultValue:null,description:"",name:"handleKeyPress",required:!0,type:{name:"(e?: KeyboardEvent<Element>, item?: DropdownDataOption) => void"}}}}}catch{}function Z(e,n,t){const o=[];return n.forEach(r=>{const d=ge(e,r,t);d&&o.push(d)}),o}const ge=(e,n,t)=>{const o=e(n),r=[];if(n.children){const d=Z(e,n.children,t);d.length>0&&(r.push(...d),t.push(n.id))}if(o||r.length>0)return{...n,treeItemProps:{className:L({"moonstone-disabled":!o})},isDisabled:!o,children:r}},H=(e,n,t)=>{if(e(n))return n;if(n.children){const o=n.children.reduce((r,d)=>r||H(e,d,t),null);return o&&t&&t.push(n.id),o}},ve=e=>{var o;const n=[],t=r=>{n.push(r),r.children&&r.children.forEach(t)};return(o=e==null?void 0:e.forEach)==null||o.call(e,t),n},I=({isDisplayed:e,minWidth:n,maxWidth:t,maxHeight:o,anchorEl:r,anchorPosition:d,anchorElOrigin:m,transformElOrigin:P,position:x,hasOverlay:E,hasSearch:C,autoAddSearchLimit:b,treeData:h,value:M,values:V,handleSelect:S,onClose:v})=>{var N;const[D,a]=ue(e,d,r,m,P,x),[f,y]=w.useState(""),[A,p]=w.useState([]),_=s=>{p(c=>[...c,s.id])},z=s=>{p(c=>c.filter(g=>g!==s.id))},T=[],j=[];f!==""&&(h=Z(s=>s.label.toLowerCase().includes(f.toLowerCase()),h,T)),M&&h.forEach(s=>{const c=H(g=>g.value===M,s,T);c&&j.push(c.id)}),V&&V.forEach(s=>{h.forEach(c=>{const g=H(R=>R.value===s,c,T);g&&j.push(g.id)})});const O={position:x,...D};n&&(O.minWidth=n),t&&(O.maxWidth=t),o&&(O.maxHeight=o);let q=C;return typeof C>"u"&&(q=((N=ve(h))==null?void 0:N.length)>b),l.jsxs(l.Fragment,{children:[l.jsxs("menu",{ref:a,className:"moonstone-menu",style:O,children:[q&&l.jsx("div",{className:"moonstone-menu_searchInput",children:l.jsx(de,{value:f,onChange:s=>y(s.target.value),onKeyUp:s=>{if(s.key==="Enter"&&h.length>0){const c=H(g=>!g.isDisabled,h[0]);c&&S(s,c)}},onClear:()=>y("")})}),l.jsx(ce,{data:h,selectedItems:j,size:"small",showCheckbox:!!V,openedItems:[...A,...T],onOpenItem:_,onCloseItem:z,onClickItem:(s,c)=>{S(c,s)}})]}),E&&e&&l.jsx("div",{"aria-hidden":"true",className:"moonstone-menu_overlay",onClick:v,onContextMenu:v})]})};I.defaultProps={hasOverlay:!0,autoAddSearchLimit:7,searchEmptyText:"No results found.",position:"fixed",anchorEl:null,anchorPosition:{top:0,left:0},anchorElOrigin:{vertical:"bottom",horizontal:"left"},transformElOrigin:{vertical:"top",horizontal:"left"}};I.displayName="TreeViewMenu";try{I.displayName="TreeViewMenu",I.__docgenInfo={description:"",displayName:"TreeViewMenu",props:{style:{defaultValue:null,description:"Additional styles",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onMouseEnter:{defaultValue:null,description:"Function triggered when the mouse pointer hovering the menu",name:"onMouseEnter",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onMouseLeave:{defaultValue:null,description:"Function triggered when the mouse pointer move off the menu",name:"onMouseLeave",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},hasSearch:{defaultValue:null,description:`Whether the Menu displays a search input at the top
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:{value:"7"},description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:{value:"No results found."},description:"Text to display when the search doesn't show any results",name:"searchEmptyText",required:!1,type:{name:"string"}},maxHeight:{defaultValue:null,description:"Maximum height of the Menu",name:"maxHeight",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"Maximum width of the Menu",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"Minimum width of the Menu",name:"minWidth",required:!1,type:{name:"string"}},isDisplayed:{defaultValue:null,description:"Menu is display",name:"isDisplayed",required:!0,type:{name:"boolean"}},anchorEl:{defaultValue:{value:"null"},description:"Reference element to positioning the menu",name:"anchorEl",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},anchorPosition:{defaultValue:{value:`{
        top: 0,
        left: 0
    }`},description:"Position of the menu in px relative to anchorEl or the document",name:"anchorPosition",required:!1,type:{name:"AnchorPosition"}},anchorElOrigin:{defaultValue:{value:`{
        vertical: 'bottom',
        horizontal: 'left'
    }`},description:"Point on the anchor where the menu's anchorEl will attach to",name:"anchorElOrigin",required:!1,type:{name:"AnchorElOrigin"}},transformElOrigin:{defaultValue:{value:`{
        vertical: 'top',
        horizontal: 'left'
    }`},description:"This is the point on the menu which will attach to the anchor's origin",name:"transformElOrigin",required:!1,type:{name:"TransformElOrigin"}},position:{defaultValue:{value:"fixed"},description:`If 'absolute' is passed in for the position, the component will be positioned as per normal
CSS rules (i.e., positioned against the closest positioned ancestor). Position is 'fixed' by default`,name:"position",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},onClose:{defaultValue:null,description:"Function triggered when the menu close",name:"onClose",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onEntering:{defaultValue:null,description:"Function triggered when the menu is going to be opened (before open)",name:"onEntering",required:!1,type:{name:"() => void"}},onEntered:{defaultValue:null,description:"Function triggered when the menu has been opened (after open)",name:"onEntered",required:!1,type:{name:"() => void"}},onExiting:{defaultValue:null,description:"Function triggered when the menu is going to be closed (before exit)",name:"onExiting",required:!1,type:{name:"() => void"}},onExited:{defaultValue:null,description:"Function triggered when the menu has been closed (after exit)",name:"onExited",required:!1,type:{name:"() => void"}},hasOverlay:{defaultValue:{value:"true"},description:"The menu has overlay or not",name:"hasOverlay",required:!1,type:{name:"boolean"}},treeData:{defaultValue:null,description:"Data to generate the tree",name:"treeData",required:!0,type:{name:"TreeViewData[]"}},searchInput:{defaultValue:null,description:"",name:"searchInput",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[]"}},imageSize:{defaultValue:null,description:"",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},handleSelect:{defaultValue:null,description:"",name:"handleSelect",required:!0,type:{name:"(e?: KeyboardEvent<Element> | MouseEvent<Element, MouseEvent>, item?: DropdownDataOption) => void"}},handleKeyPress:{defaultValue:null,description:"",name:"handleKeyPress",required:!1,type:{name:"(e?: KeyboardEvent<Element>, item?: DropdownDataOption) => void"}}}}}catch{}const we=e=>{var o;const n=[],t=r=>{n.push(r),r.children&&r.children.forEach(t)};return(o=e==null?void 0:e.forEach)==null||o.call(e,t),n},Ee=e=>Array.isArray(e)?e.every(n=>"options"in n&&"groupLabel"in n):!1,B=(e,n)=>Ee(e)?e.reduce((t,o)=>t.concat(o.options),[]).find(t=>t.value===n):e.find(t=>t.value===n),U=({data:e,treeData:n,label:t,placeholder:o,value:r,values:d,isDisabled:m,variant:P="ghost",size:x="medium",icon:E,hasSearch:C,autoAddSearchLimit:b=7,searchEmptyText:h="No results found.",imageSize:M,onClear:V,onChange:S,onBlur:v,onFocus:D,className:a,...f})=>{var X,Q;const[y,A]=w.useState(!1),[p,_]=w.useState({focused:!1,event:null,lastSent:!1}),[z,T]=w.useState(null),[j,O]=w.useState(null),q=w.useRef(),N=Array.isArray(n),s=w.useMemo(()=>N?we(n):e,[n,e,N]),c=s.length===0;if(w.useEffect(()=>{p.focused&&p.event&&!p.lastSent&&D&&(D(p.event),_(i=>({...i,lastSent:!0})))},[D,p]),w.useEffect(()=>{!p.focused&&!y&&p.event&&p.lastSent&&v&&(v(p.event),_(i=>({...i,lastSent:!1})))},[v,y,p]),!Array.isArray(s))return null;const g=80,R={top:4,left:0};let F,k;switch(M){case"big":F="400px",k="440px";break;case"small":F="264px",k="320px";break;default:F="250px",k="270px"}const G=i=>{i.stopPropagation();const u=i.currentTarget.offsetWidth;O(`${u<g?g:u}px`),T(i.currentTarget),A(!0)},K=(i,u)=>{if(u)if(d)u.isDisabled||(i.stopPropagation(),S(i,u));else{let W=!u.isDisabled;!u.isDisabled&&u.value!==r&&(i.stopPropagation(),W=S(i,u)),W!==!1&&A(!1)}},ee=()=>{A(!1),T(null)},ne=(i,u)=>{i.key==="Enter"&&K(i,u)},J=r||(d==null?void 0:d.length)>0,te=L(!t&&!E?"flexRow_reverse":"flexRow_between","alignCenter","moonstone-dropdown",`moonstone-${x}`,`moonstone-dropdown_${P}`,{"moonstone-disabled":typeof m>"u"&&c?!0:m,"moonstone-filled":J,"moonstone-opened":y}),ae=N?I:$;return l.jsxs("div",{className:L("moonstone-dropdown_container",a),...f,children:[l.jsxs("div",{ref:q,role:"listbox","aria-label":t||((X=B(s,r))==null?void 0:X.label)||o,"aria-disabled":m||c,className:L(te),tabIndex:0,onClick:!m&&G,onKeyUp:i=>{i.key==="Enter"&&!m&&G(i)},onBlur:i=>{_(u=>({...u,focused:!1,event:i}))},onFocus:i=>{_(u=>({...u,focused:!0,event:i}))},children:[E&&l.jsx(E.type,{...E.props,size:"default",className:L("moonstone-dropdown_icon"),role:"presentation"}),!t&&d&&d.length>0?l.jsx("div",{className:"moonstone-dropdown_tags flexFluid flexRow",children:d.map(i=>{const u=B(s,i);return u&&l.jsx(oe,{label:u.label,value:u.value,size:x,isDisabled:m,role:"option",onClick:W=>{q.current.focus(),q.current.blur(),m||K(W,u)}},u.value)})}):l.jsx(ye,{isNowrap:!0,variant:x==="small"?"caption":"body",component:"span",className:L("flexFluid","moonstone-dropdown_label"),title:t,role:"option",children:t||((Q=B(s,r))==null?void 0:Q.label)||o}),V&&J&&!m&&l.jsx(ie,{className:"moonstone-baseInput_clearButton flexRow_center alignCenter",variant:"ghost",icon:l.jsx(re,{}),"aria-label":"Reset",onClick:i=>{i.stopPropagation(),q.current.focus(),q.current.blur(),V(i)}}),l.jsx(le,{className:"moonstone-dropdown_chevronDown",role:"presentation"})]}),y&&l.jsx(ae,{isDisplayed:!0,data:e,treeData:n,value:r,values:d,anchorPosition:R,minWidth:j,maxWidth:F,maxHeight:k,anchorEl:z,hasSearch:C,autoAddSearchLimit:b,searchEmptyText:h,handleKeyPress:ne,handleSelect:K,imageSize:M,onClose:ee})]})};U.displayName="Dropdown";try{U.displayName="Dropdown",U.__docgenInfo={description:"",displayName:"Dropdown",props:{data:{defaultValue:null,description:"Content of the dropdown",name:"data",required:!1,type:{name:"DropdownData"}},treeData:{defaultValue:null,description:"Content of the dropdown, if tree",name:"treeData",required:!1,type:{name:"DropdownDataTree"}},placeholder:{defaultValue:null,description:"Text for dropdown, when no value is selected",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label of the dropdown",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Value of the dropdown",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"Value of the dropdown",name:"values",required:!1,type:{name:"string[]"}},icon:{defaultValue:null,description:"Icon displays before the dropdown's label",name:"icon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},variant:{defaultValue:{value:"ghost"},description:"Dropdown's variants",name:"variant",required:!1,type:{name:"enum",value:[{value:'"ghost"'},{value:'"outlined"'}]}},size:{defaultValue:{value:"medium"},description:"Dropdown's sizes",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'}]}},imageSize:{defaultValue:null,description:"Size of images to show in the Dropdown",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},isDisabled:{defaultValue:null,description:"Whether the component should be disabled",name:"isDisabled",required:!1,type:{name:"boolean"}},hasSearch:{defaultValue:null,description:`Whether the Menu within the Dropdown has a search input
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:{value:"7"},description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:{value:"No results found."},description:"The text to display if the Dropdown Menu has a search input and the search doesn't have any results",name:"searchEmptyText",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Function - when passed in, the Clear icon appears at the end of the input and its click event is passed back when the Clear icon is clicked",name:"onClear",required:!1,type:{name:"MouseEventHandler<Element>"}},onChange:{defaultValue:null,description:`Function trigger on change with the current option as param
@param event - Mouse event
@param item - The current item selected`,name:"onChange",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>, item: DropdownDataOption) => void"}},onFocus:{defaultValue:null,description:"Function triggered on focus of the checkbox value",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"Function triggered when the checkbox value loses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}}}}}catch{}export{U as D};

import{j as r}from"./jsx-runtime-Cf8x2fCZ.js";import{r as v}from"./index-G8LIXM5I.js";import{c as P}from"./clsx-B-dksMZM.js";import{B as te}from"./Button-Cjq0zrP_.js";import{T as ae}from"./Tag-CXHcMMTy.js";import{S as le}from"./Search-DSeLwkIx.js";import{S as oe}from"./ChevronDown-DW4Cg-no.js";import{a as re,M as X,u as ie}from"./MenuItem-B_pJzWTb.js";import{S as se}from"./SearchInput-5ftwiOLF.js";import{T as ue}from"./TreeView-Brs_G0Nf.js";import{S as de}from"./Separator-ChTYNnEP.js";import{S as ce,a as pe}from"./CheckboxUnchecked-CIfxf0rQ.js";import{T as me}from"./Typography-C8hU4Ja4.js";const B=({isDisplayed:n,anchorPosition:t,minWidth:l,maxWidth:i,maxHeight:o,anchorEl:c,hasSearch:g,autoAddSearchLimit:k,searchEmptyText:E,data:f,value:O,values:V,imageSize:m,handleSelect:S,handleKeyPress:b,onClose:D})=>{const C=!(f.length<1)&&typeof f[0].options<"u",A=a=>(V==null?void 0:V.indexOf(a.value))>-1?r.jsx(ce,{role:"checkbox",color:"blue"}):r.jsx(pe,{role:"checkbox"}),x=a=>r.jsx(X,{role:"option",iconStart:V?A(a):a.iconStart,iconSize:"default",label:a.label,description:a.description,iconEnd:a.iconEnd,isDisabled:a.isDisabled,isSelected:O===a.value,image:a.image,imageSize:m,onClick:s=>S(s,a),onKeyPress:s=>b(s,a),...a.attributes},a.value),w=(a,s,h)=>r.jsxs("div",{"data-option-type":"group",children:[h>0&&r.jsx(de,{}),r.jsx(X,{variant:"title",label:s}),a.map(I=>x(I))]},`${s}-${h}`);return f.length===0?null:r.jsx(re,{isDisplayed:n,position:"fixed",anchorPosition:t,minWidth:l,maxWidth:i,maxHeight:o,anchorEl:c,hasSearch:g,autoAddSearchLimit:k,searchEmptyText:E,onClose:D,children:f.map((a,s)=>C?(a.options.map(h=>x(h)),w(a.options,a.groupLabel,s)):x(a))})};try{B.displayName="DropdownMenu",B.__docgenInfo={description:"",displayName:"DropdownMenu",props:{maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"string"}},isDisplayed:{defaultValue:null,description:"",name:"isDisplayed",required:!0,type:{name:"boolean"}},anchorEl:{defaultValue:null,description:"",name:"anchorEl",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},anchorPosition:{defaultValue:null,description:"",name:"anchorPosition",required:!1,type:{name:"AnchorPosition"}},hasSearch:{defaultValue:null,description:"",name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:null,description:"",name:"autoAddSearchLimit",required:!0,type:{name:"number"}},searchInput:{defaultValue:null,description:"",name:"searchInput",required:!1,type:{name:"string"}},searchEmptyText:{defaultValue:null,description:"",name:"searchEmptyText",required:!1,type:{name:"string"}},hasOverlay:{defaultValue:null,description:"",name:"hasOverlay",required:!1,type:{name:"boolean"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"DropdownDataOption[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[]"}},imageSize:{defaultValue:null,description:"",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},handleSelect:{defaultValue:null,description:"",name:"handleSelect",required:!0,type:{name:"(e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>, item?: DropdownDataOption) => void"}},handleKeyPress:{defaultValue:null,description:"",name:"handleKeyPress",required:!0,type:{name:"(e?: KeyboardEvent<Element>, item?: DropdownDataOption) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}function Q(n,t,l){const i=[];return t.forEach(o=>{const c=fe(n,o,l);c&&i.push(c)}),i}const fe=(n,t,l)=>{const i=n(t),o=[];if(t.children){const c=Q(n,t.children,l);c.length>0&&(o.push(...c),l.push(t.id))}if(i||o.length>0)return{...t,treeItemProps:{className:P({"moonstone-disabled":!i})},isDisabled:!i,children:o}},R=(n,t,l)=>{if(n(t))return t;if(t.children){const i=t.children.reduce((o,c)=>o||R(n,c,l),null);return i&&l&&l.push(t.id),i}},he=n=>{var i;const t=[],l=o=>{t.push(o),o.children&&o.children.forEach(l)};return(i=n==null?void 0:n.forEach)==null||i.call(n,l),t},z=({isDisplayed:n,minWidth:t,maxWidth:l,maxHeight:i,anchorEl:o,anchorPosition:c,anchorElOrigin:g,transformElOrigin:k,position:E,hasOverlay:f,hasSearch:O,autoAddSearchLimit:V,treeData:m,value:S,values:b,handleSelect:D,onClose:_})=>{var T;const[C,A]=ie(n,c,o,g,k,E),[x,w]=v.useState(""),[a,s]=v.useState([]),h=d=>{s(p=>[...p,d.id])},I=d=>{s(p=>p.filter(y=>y!==d.id))},M=[],W=[];x!==""&&(m=Q(d=>d.label.toLowerCase().includes(x.toLowerCase()),m,M)),S&&m.forEach(d=>{const p=R(y=>y.value===S,d,M);p&&W.push(p.id)}),b&&b.forEach(d=>{m.forEach(p=>{const y=R(H=>H.value===d,p,M);y&&W.push(y.id)})});const N={position:E,...C};t&&(N.minWidth=t),l&&(N.maxWidth=l),i&&(N.maxHeight=i);let q=O;return typeof O>"u"&&(q=((T=he(m))==null?void 0:T.length)>V),r.jsxs(r.Fragment,{children:[r.jsxs("menu",{ref:A,className:"moonstone-menu",style:N,children:[q&&r.jsx("div",{className:"moonstone-menu_searchInput",children:r.jsx(se,{value:x,onChange:d=>w(d.target.value),onKeyPress:d=>{if(d.key==="Enter"&&m.length>0){const p=R(y=>!y.isDisabled,m[0]);p&&D(d,p)}},onClear:()=>w("")})}),r.jsx(ue,{data:m,selectedItems:W,size:"small",showCheckbox:!!b,openedItems:[...a,...M],onOpenItem:h,onCloseItem:I,onClickItem:(d,p)=>{D(p,d)}})]}),f&&n&&r.jsx("div",{"aria-hidden":"true",className:"moonstone-menu_overlay",onClick:_,onContextMenu:_})]})};z.defaultProps={hasOverlay:!0,autoAddSearchLimit:7,searchEmptyText:"No results found.",position:"fixed",anchorEl:null,anchorPosition:{top:0,left:0},anchorElOrigin:{vertical:"bottom",horizontal:"left"},transformElOrigin:{vertical:"top",horizontal:"left"}};z.displayName="TreeViewMenu";try{z.displayName="TreeViewMenu",z.__docgenInfo={description:"",displayName:"TreeViewMenu",props:{treeData:{defaultValue:null,description:"Data to generate the tree",name:"treeData",required:!0,type:{name:"TreeViewData[]"}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:null,description:"",name:"minWidth",required:!1,type:{name:"string"}},isDisplayed:{defaultValue:null,description:"",name:"isDisplayed",required:!0,type:{name:"boolean"}},anchorEl:{defaultValue:{value:"null"},description:"",name:"anchorEl",required:!1,type:{name:"MutableRefObject<HTMLDivElement>"}},anchorPosition:{defaultValue:{value:`{
        top: 0,
        left: 0
    }`},description:"",name:"anchorPosition",required:!1,type:{name:"AnchorPosition"}},anchorElOrigin:{defaultValue:{value:`{
        vertical: 'bottom',
        horizontal: 'left'
    }`},description:"",name:"anchorElOrigin",required:!1,type:{name:"AnchorElOrigin"}},transformElOrigin:{defaultValue:{value:`{
        vertical: 'top',
        horizontal: 'left'
    }`},description:"",name:"transformElOrigin",required:!1,type:{name:"TransformElOrigin"}},position:{defaultValue:{value:"fixed"},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},hasSearch:{defaultValue:null,description:"",name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:{value:"7"},description:"",name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchInput:{defaultValue:null,description:"",name:"searchInput",required:!1,type:{name:"string"}},searchEmptyText:{defaultValue:{value:"No results found."},description:"",name:"searchEmptyText",required:!1,type:{name:"string"}},hasOverlay:{defaultValue:{value:"true"},description:"",name:"hasOverlay",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[]"}},imageSize:{defaultValue:null,description:"",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},handleSelect:{defaultValue:null,description:"",name:"handleSelect",required:!0,type:{name:"(e?: MouseEvent<Element, MouseEvent> | KeyboardEvent<Element>, item?: DropdownDataOption) => void"}},handleKeyPress:{defaultValue:null,description:"",name:"handleKeyPress",required:!0,type:{name:"(e?: KeyboardEvent<Element>, item?: DropdownDataOption) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}const ye=n=>{var i;const t=[],l=o=>{t.push(o),o.children&&o.children.forEach(l)};return(i=n==null?void 0:n.forEach)==null||i.call(n,l),t},$=({data:n,treeData:t,label:l,placeholder:i,value:o,values:c,isDisabled:g,variant:k="ghost",size:E="medium",icon:f,hasSearch:O,autoAddSearchLimit:V=7,searchEmptyText:m="No results found.",imageSize:S,onClear:b,onChange:D,onBlur:_,onFocus:C,className:A,...x})=>{var U;const[w,a]=v.useState(!1),[s,h]=v.useState({focused:!1,event:null,lastSent:!1}),[I,M]=v.useState(null),[W,N]=v.useState(null),q=v.useRef(),T=Array.isArray(t),d=v.useMemo(()=>T?ye(t):n,[t,n,T]),p=d.length===0;if(v.useEffect(()=>{s.focused&&s.event&&!s.lastSent&&C&&(C(s.event),h(e=>({...e,lastSent:!0})))},[C,s]),v.useEffect(()=>{!s.focused&&!w&&s.event&&s.lastSent&&_&&(_(s.event),h(e=>({...e,lastSent:!1})))},[_,w,s]),!Array.isArray(d))return null;const y=80,H={top:4,left:0};let L,K;switch(S){case"big":L="400px",K="440px";break;case"small":L="264px",K="320px";break;default:L="250px",K="270px"}const G=e=>{e.stopPropagation();const u=e.currentTarget.offsetWidth;N(`${u<y?y:u}px`),M(e.currentTarget),a(!0)},F=(e,u)=>{if(u)if(c)u.isDisabled||(e.stopPropagation(),D(e,u));else{let j=!u.isDisabled;!u.isDisabled&&u.value!==o&&(e.stopPropagation(),j=D(e,u)),j!==!1&&a(!1)}},Y=()=>{a(!1),M(null)},Z=(e,u)=>{e.key==="Enter"&&F(e,u)},J=o||(c==null?void 0:c.length)>0,ee=P(!l&&!f?"flexRow_reverse":"flexRow_between","alignCenter","moonstone-dropdown",`moonstone-${E}`,`moonstone-dropdown_${k}`,{"moonstone-disabled":typeof g>"u"&&p?!0:g,"moonstone-filled":J,"moonstone-opened":w}),ne=T?z:B;return r.jsxs("div",{className:P("moonstone-dropdown_container",A),...x,onKeyPress:e=>{e.key==="Enter"&&!g&&G(e)},children:[r.jsxs("div",{ref:q,role:"dropdown",className:P(ee),tabIndex:0,onClick:!g&&G,onKeyPress:e=>{e.key==="Enter"&&F(e)},onBlur:e=>{h(u=>({...u,focused:!1,event:e}))},onFocus:e=>{h(u=>({...u,focused:!0,event:e}))},children:[f&&r.jsx(f.type,{...f.props,size:"default",className:P("moonstone-dropdown_icon")}),!l&&c&&c.length>0?r.jsx("div",{className:"moonstone-dropdown_tags flexFluid flexRow",children:c.map(e=>{const u=d.find(j=>j.value===e);return u&&r.jsx(ae,{label:u.label,value:u.value,size:E,onClick:j=>{q.current.focus(),q.current.blur(),F(j,u)}},u.value)})}):r.jsx(me,{isNowrap:!0,variant:E==="small"?"caption":"body",component:"span",className:P("flexFluid","moonstone-dropdown_label"),title:l,children:l||((U=d.find(e=>e.value===o))==null?void 0:U.label)||i}),b&&J&&!g&&r.jsx(te,{className:"moonstone-baseInput_clearButton flexRow_center alignCenter",variant:"ghost",icon:r.jsx(le,{}),"aria-label":"Reset",onClick:e=>{e.stopPropagation(),q.current.focus(),q.current.blur(),b(e)}}),r.jsx(oe,{className:"moonstone-dropdown_chevronDown"})]}),w&&r.jsx(ne,{isDisplayed:!0,data:n,treeData:t,value:o,values:c,anchorPosition:H,minWidth:W,maxWidth:L,maxHeight:K,anchorEl:I,hasSearch:O,autoAddSearchLimit:V,searchEmptyText:m,handleKeyPress:Z,handleSelect:F,imageSize:S,onClose:Y})]})};$.displayName="Dropdown";try{$.displayName="Dropdown",$.__docgenInfo={description:"",displayName:"Dropdown",props:{data:{defaultValue:null,description:"Content of the dropdown",name:"data",required:!1,type:{name:"DropdownDataOption[]"}},treeData:{defaultValue:null,description:"Content of the dropdown, if tree",name:"treeData",required:!1,type:{name:"TreeViewData[]"}},placeholder:{defaultValue:null,description:"Text for dropdown, when no value is selected",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label of the dropdown",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Value of the dropdown",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"Value of the dropdown",name:"values",required:!1,type:{name:"string[]"}},icon:{defaultValue:null,description:"Icon displays before the dropdown's label",name:"icon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},variant:{defaultValue:{value:"ghost"},description:"Dropdown's variants",name:"variant",required:!1,type:{name:"enum",value:[{value:'"ghost"'},{value:'"outlined"'}]}},size:{defaultValue:{value:"medium"},description:"Dropdown's sizes",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'}]}},imageSize:{defaultValue:null,description:"Size of images to show in the Dropdown",name:"imageSize",required:!1,type:{name:"enum",value:[{value:'"big"'},{value:'"small"'}]}},isDisabled:{defaultValue:null,description:"Whether the component should be disabled",name:"isDisabled",required:!1,type:{name:"boolean"}},hasSearch:{defaultValue:null,description:`Whether the Menu within the Dropdown has a search input
Autosearch is enabled if undefined
Autosearch is when search input is automatically added in the dropdown when autoAddSearchLimit is reached
@see autoAddSearchLimit`,name:"hasSearch",required:!1,type:{name:"boolean"}},autoAddSearchLimit:{defaultValue:{value:"7"},description:`Autosearch is triggered when data items exceed this limit
Applies only when autosearch is enabled (i.e. hasSearch is undefined)
Defaults to 7 if undefined or < 0
Autosearch is when search input is automatically added in the dropdown`,name:"autoAddSearchLimit",required:!1,type:{name:"number"}},searchEmptyText:{defaultValue:{value:"No results found."},description:"The text to display if the Dropdown Menu has a search input and the search doesn't have any results",name:"searchEmptyText",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Additional classname",name:"className",required:!1,type:{name:"string"}},onClear:{defaultValue:null,description:"Function - when passed in, the Clear icon appears at the end of the input and its click event is passed back when the Clear icon is clicked",name:"onClear",required:!1,type:{name:"MouseEventHandler<Element>"}},onChange:{defaultValue:null,description:`Function trigger on change with the current option as param
@param event - Mouse event
@param item - The current item selected`,name:"onChange",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>, item: DropdownDataOption) => void"}},onFocus:{defaultValue:null,description:"Function triggered on focus of the checkbox value",name:"onFocus",required:!1,type:{name:"FocusEventHandler<Element>"}},onBlur:{defaultValue:null,description:"Function triggered when the checkbox value loses focus",name:"onBlur",required:!1,type:{name:"FocusEventHandler<Element>"}}}}}catch{}export{$ as D};
